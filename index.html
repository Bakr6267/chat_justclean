<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JustClean Scripts - Ø£Ø¯Ø§Ø© Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            font-weight: 500;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #6366f1);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-danger:hover {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
        }
        
        .input-field {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(59, 130, 246, 0.2);
            border-radius: 8px;
            padding: 12px;
            transition: all 0.2s ease;
            width: 100%;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .script-text {
            cursor: pointer;
            padding: 12px;
            border-radius: 8px;
            transition: all 0.2s ease;
            line-height: 1.6;
        }
        
        .script-text:hover {
            background: rgba(59, 130, 246, 0.1);
            transform: scale(1.01);
        }
        
        .table-header {
            background: linear-gradient(135deg, #3b82f6, #6366f1);
            color: white;
        }
        
        .table-row {
            background: rgba(255, 255, 255, 0.8);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .table-row:nth-child(even) {
            background: rgba(248, 250, 252, 0.8);
        }
        
        .table-row:hover {
            background: rgba(59, 130, 246, 0.05);
        }
        
        .status-indicator {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: #10b981;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
        
        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 24px;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .close-btn {
            color: #9ca3af;
            float: left;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }
        
        .close-btn:hover {
            color: #374151;
        }
        
        .category-badge {
            display: inline-block;
            padding: 4px 8px;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 12px;
            font-size: 12px;
            color: #3b82f6;
            margin-left: 8px;
        }
        
        .help-text {
            background: rgba(59, 130, 246, 0.05);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 8px;
            padding: 12px;
            color: #1e40af;
            font-size: 14px;
            margin: 16px 0;
        }
        
        .draggable-row {
            cursor: move;
            transition: all 0.2s ease;
        }
        
        .dragging {
            opacity: 0.6;
            background: linear-gradient(135deg, #f59e0b, #ef4444);
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .drag-over {
            border-top: 3px solid #3b82f6;
        }
        
        .drag-handle {
            cursor: move;
            color: #6b7280;
            font-size: 16px;
            padding: 4px;
            margin-left: 8px;
        }
        
        .drag-handle:hover {
            color: #3b82f6;
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <!-- Status Indicator -->
    <div class="status-indicator" id="statusIndicator">Ù…Ø­ÙÙˆØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</div>
    
    <!-- Notification -->
    <div class="notification" id="notification"></div>
    
    <!-- Add Script Modal -->
    <div id="addModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2 class="text-xl font-bold mb-4 text-gray-800">Ø¥Ø¶Ø§ÙØ© Ø³ÙƒØ±ÙŠØ¨Øª Ø¬Ø¯ÙŠØ¯</h2>
            <form id="addForm">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©</label>
                    <select id="newCategory" class="input-field" required>
                        <option value="greeting">ØªØ±Ø­ÙŠØ¨</option>
                        <option value="delay">ØªØ£Ø®ÙŠØ±</option>
                        <option value="cancel">Ø¥Ù„ØºØ§Ø¡</option>
                        <option value="complaint">Ø´ÙƒÙˆÙ‰</option>
                        <option value="payment">Ø¯ÙØ¹</option>
                        <option value="order">Ø·Ù„Ø¨</option>
                        <option value="other">Ø£Ø®Ø±Ù‰</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">ÙˆØµÙ Ø§Ù„Ù…ÙˆÙ‚Ù</label>
                    <input type="text" id="newSituation" class="input-field" required placeholder="Ù…Ø«Ø§Ù„: ØªØ£Ø®Ø± Ø§Ù„Ø¹Ø§Ù…Ù„">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ</label>
                    <textarea id="newArabic" class="input-field" rows="3" required placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ø¯ Ù‡Ù†Ø§..."></textarea>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ</label>
                    <textarea id="newEnglish" class="input-field" rows="3" required placeholder="Write response here..."></textarea>
                </div>
                <div class="flex gap-3">
                    <button type="submit" class="btn-primary flex-1">Ø¥Ø¶Ø§ÙØ©</button>
                    <button type="button" id="cancelBtn" class="bg-gray-300 text-gray-700 px-6 py-3 rounded-lg">Ø¥Ù„ØºØ§Ø¡</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Header -->
    <div class="text-white py-6 mb-6">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center flex-wrap gap-4">
                <div>
                    <h1 class="text-3xl font-bold mb-2">Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª JustClean</h1>
                    <p class="text-lg opacity-90">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù†Øµ Ù„Ù†Ø³Ø®Ù‡ ÙÙˆØ±Ø§Ù‹</p>
                </div>
                <div class="flex gap-3">
                    <button id="addBtn" class="btn-success">+ Ø¥Ø¶Ø§ÙØ© Ø³ÙƒØ±ÙŠØ¨Øª</button>
                    <button id="exportBtn" class="btn-primary">ØªØµØ¯ÙŠØ±</button>
                    <input type="file" id="importFile" accept=".json" style="display: none;">
                    <button id="importBtn" class="btn-primary">Ø§Ø³ØªÙŠØ±Ø§Ø¯</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 pb-8">
        <!-- Search Section -->
        <div class="card p-6 mb-6">
            <div class="mb-4">
                <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª..." class="input-field text-lg">
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                <select id="categoryFilter" class="input-field">
                    <option value="all">ÙƒÙ„ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹</option>
                    <option value="greeting">ØªØ±Ø­ÙŠØ¨</option>
                    <option value="delay">ØªØ£Ø®ÙŠØ±</option>
                    <option value="cancel">Ø¥Ù„ØºØ§Ø¡</option>
                    <option value="complaint">Ø´ÙƒÙˆÙ‰</option>
                    <option value="payment">Ø¯ÙØ¹</option>
                    <option value="order">Ø·Ù„Ø¨</option>
                    <option value="other">Ø£Ø®Ø±Ù‰</option>
                </select>
                
                <button id="resetBtn" class="bg-gray-500 text-white px-4 py-3 rounded-lg hover:bg-gray-600">Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø«</button>
                
                <div class="flex items-center justify-center bg-green-50 border border-green-200 rounded-lg px-4">
                    <span class="text-green-700 font-medium">Ø§Ù„Ø¹Ø¯Ø¯: <span id="countDisplay">0</span></span>
                </div>
                
                <button id="clearAllBtn" class="btn-danger">Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
            </div>
            
            <div class="help-text">
                ğŸ’¡ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù†Øµ Ù„Ù†Ø³Ø®Ù‡ â€¢ Ø§Ø³Ø­Ø¨ Ù…Ù† â‰¡ Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ±ØªÙŠØ¨ â€¢ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ØªÙØ­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ â€¢ Ø§Ø³ØªØ®Ø¯Ù… "ØªØµØ¯ÙŠØ±" Ù„Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
            </div>
        </div>
        
        <!-- Scripts Table -->
        <div class="card overflow-hidden">
            <table class="min-w-full">
                <thead class="table-header">
                    <tr>
                        <th class="px-4 py-3 text-right font-medium">ØªØ±ØªÙŠØ¨</th>
                        <th class="px-4 py-3 text-right font-medium">Ø§Ù„Ù†ÙˆØ¹</th>
                        <th class="px-4 py-3 text-right font-medium">Ø§Ù„Ù…ÙˆÙ‚Ù</th>
                        <th class="px-4 py-3 text-right font-medium">Ø§Ù„Ø±Ø¯ Ø§Ù„Ø¹Ø±Ø¨ÙŠ</th>
                        <th class="px-4 py-3 text-right font-medium">Ø§Ù„Ø±Ø¯ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ</th>
                        <th class="px-4 py-3 text-right font-medium">Ø­Ø°Ù</th>
                    </tr>
                </thead>
                <tbody id="scriptsTable">
                    <!-- Scripts will be inserted here -->
                </tbody>
            </table>
        </div>
    </main>

    <script>
        // Simple data structure
        let scripts = loadScripts() || getDefaultScripts();
        let filteredScripts = [...scripts];
        let nextId = Math.max(...scripts.map(s => s.id || 0), 0) + 1;

        // Default scripts
        function getDefaultScripts() {
            return [
                {
                    id: 1,
                    category: "greeting",
                    situation: "ØªØ±Ø­ÙŠØ¨ Ø£ÙˆÙ„ÙŠ",
                    arabic: "Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ù…Ø¹Ùƒ Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ JustClean. ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ",
                    english: "Hello, this is JustClean customer service. How can I help you?"
                },
                {
                    id: 2,
                    category: "delay",
                    situation: "ØªØ£Ø®Ø± Ø§Ù„Ø¹Ø§Ù…Ù„",
                    arabic: "Ø£Ø¹ØªØ°Ø± Ø¹Ù† Ø§Ù„ØªØ£Ø®ÙŠØ±. Ø³Ø£ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„ÙØ±ÙŠÙ‚ Ù„ØªØ­Ø¯ÙŠØ« Ù…ÙˆØ¹Ø¯ Ø§Ù„ÙˆØµÙˆÙ„.",
                    english: "I apologize for the delay. I'll contact the team to update the arrival time."
                },
                {
                    id: 3,
                    category: "cancel",
                    situation: "Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨",
                    arabic: "Ø³ÙŠØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø·Ù„Ø¨Ùƒ ÙˆØ¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø¨Ù„Øº Ø®Ù„Ø§Ù„ 3-5 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„.",
                    english: "Your order will be cancelled and refunded within 3-5 business days."
                }
            ];
        }

        // Load from storage
        function loadScripts() {
            try {
                const saved = localStorage.getItem('justclean_scripts');
                return saved ? JSON.parse(saved) : null;
            } catch (e) {
                return null;
            }
        }

        // Save to storage
        function saveScripts() {
            try {
                localStorage.setItem('justclean_scripts', JSON.stringify(scripts));
                updateStatus('ØªÙ… Ø§Ù„Ø­ÙØ¸');
            } catch (e) {
                showNotification('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸', 'error');
            }
        }

        // Update status
        function updateStatus(text) {
            const status = document.getElementById('statusIndicator');
            status.textContent = text;
            setTimeout(() => {
                status.textContent = 'Ù…Ø­ÙÙˆØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹';
            }, 2000);
        }

        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.background = type === 'error' ? '#ef4444' : '#10b981';
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // Copy text
        function copyText(text) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    showNotification('ØªÙ… Ø§Ù„Ù†Ø³Ø®');
                });
            } else {
                // Fallback
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                showNotification('ØªÙ… Ø§Ù„Ù†Ø³Ø®');
            }
        }

        // Get category display name
        function getCategoryName(category) {
            const names = {
                greeting: 'ØªØ±Ø­ÙŠØ¨',
                delay: 'ØªØ£Ø®ÙŠØ±',
                cancel: 'Ø¥Ù„ØºØ§Ø¡',
                complaint: 'Ø´ÙƒÙˆÙ‰',
                payment: 'Ø¯ÙØ¹',
                order: 'Ø·Ù„Ø¨',
                other: 'Ø£Ø®Ø±Ù‰'
            };
            return names[category] || category;
        }

        // Render table
        function renderTable() {
            const tbody = document.getElementById('scriptsTable');
            tbody.innerHTML = '';
            
            if (filteredScripts.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center py-8 text-gray-500">
                            <div class="text-4xl mb-2">ğŸ“</div>
                            <div>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª</div>
                            <div class="text-sm mt-1">Ø§Ø¶ØºØ· "Ø¥Ø¶Ø§ÙØ© Ø³ÙƒØ±ÙŠØ¨Øª" Ù„Ø¨Ø¯Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª</div>
                        </td>
                    </tr>
                `;
            } else {
                filteredScripts.forEach((script, index) => {
                    const row = document.createElement('tr');
                    row.className = 'table-row draggable-row';
                    row.draggable = true;
                    row.dataset.index = index;
                    
                    row.innerHTML = `
                        <td class="px-4 py-3">
                            <div class="drag-handle">â‰¡</div>
                        </td>
                        <td class="px-4 py-3">
                            <span class="category-badge">${getCategoryName(script.category)}</span>
                        </td>
                        <td class="px-4 py-3 font-medium">${script.situation}</td>
                        <td class="px-4 py-3">
                            <div class="script-text" onclick="copyText('${script.arabic.replace(/'/g, "\\'")}')">
                                ${script.arabic}
                            </div>
                        </td>
                        <td class="px-4 py-3">
                            <div class="script-text" onclick="copyText('${script.english.replace(/'/g, "\\'")}')">
                                ${script.english}
                            </div>
                        </td>
                        <td class="px-4 py-3">
                            <button onclick="deleteScript(${script.id})" class="btn-danger text-xs px-2 py-1">
                                Ø­Ø°Ù
                            </button>
                        </td>
                    `;
                    
                    // Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª
                    row.addEventListener('dragstart', handleDragStart);
                    row.addEventListener('dragover', handleDragOver);
                    row.addEventListener('drop', handleDrop);
                    row.addEventListener('dragend', handleDragEnd);
                    row.addEventListener('dragenter', handleDragEnter);
                    row.addEventListener('dragleave', handleDragLeave);
                    
                    tbody.appendChild(row);
                });
            }
            
            document.getElementById('countDisplay').textContent = filteredScripts.length;
        }

        // Filter scripts
        function filterScripts() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            
            filteredScripts = scripts.filter(script => {
                const matchesSearch = !search || 
                    script.situation.toLowerCase().includes(search) ||
                    script.arabic.toLowerCase().includes(search) ||
                    script.english.toLowerCase().includes(search);
                
                const matchesCategory = category === 'all' || script.category === category;
                
                return matchesSearch && matchesCategory;
            });
            
            renderTable();
        }

        // Delete script
        function deleteScript(id) {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØŸ')) {
                scripts = scripts.filter(s => s.id !== id);
                saveScripts();
                filterScripts();
                showNotification('ØªÙ… Ø§Ù„Ø­Ø°Ù');
            }
        }

        // Add script
        function addScript(data) {
            const newScript = {
                id: nextId++,
                category: data.category,
                situation: data.situation,
                arabic: data.arabic,
                english: data.english
            };
            
            scripts.push(newScript);
            saveScripts();
            filterScripts();
            showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª');
        }

        // Export data
        function exportData() {
            const data = {
                scripts: scripts,
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `justclean-scripts-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('ØªÙ… Ø§Ù„ØªØµØ¯ÙŠØ±');
        }

        // Import data
        function importData(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    if (data.scripts && Array.isArray(data.scripts)) {
                        if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ ÙƒÙ„ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©ØŸ')) {
                            scripts = data.scripts;
                            nextId = Math.max(...scripts.map(s => s.id || 0), 0) + 1;
                            saveScripts();
                            filterScripts();
                            showNotification('ØªÙ… Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯');
                        }
                    } else {
                        showNotification('Ù…Ù„Ù ØºÙŠØ± ØµØ­ÙŠØ­', 'error');
                    }
                } catch (e) {
                    showNotification('Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù', 'error');
                }
            };
            reader.readAsText(file);
        }

        // Clear all
        function clearAll() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§ØªØŸ\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) {
                scripts = [];
                saveScripts();
                filterScripts();
                showNotification('ØªÙ… Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª');
            }
        }

        // Modal functions
        function openModal() {
            document.getElementById('addModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('addModal').style.display = 'none';
            document.getElementById('addForm').reset();
        }

        // Initialize event listeners
        function initEvents() {
            // Search and filter
            document.getElementById('searchInput').addEventListener('input', filterScripts);
            document.getElementById('categoryFilter').addEventListener('change', filterScripts);
            document.getElementById('resetBtn').addEventListener('click', () => {
                document.getElementById('searchInput').value = '';
                document.getElementById('categoryFilter').value = 'all';
                filterScripts();
            });

            // Buttons
            document.getElementById('addBtn').addEventListener('click', openModal);
            document.getElementById('exportBtn').addEventListener('click', exportData);
            document.getElementById('importBtn').addEventListener('click', () => {
                document.getElementById('importFile').click();
            });
            document.getElementById('importFile').addEventListener('change', (e) => {
                if (e.target.files[0]) importData(e.target.files[0]);
            });
            document.getElementById('clearAllBtn').addEventListener('click', clearAll);

            // Modal
            document.getElementById('cancelBtn').addEventListener('click', closeModal);
            document.querySelector('.close-btn').addEventListener('click', closeModal);
            document.getElementById('addModal').addEventListener('click', (e) => {
                if (e.target.id === 'addModal') closeModal();
            });

            // Form
            document.getElementById('addForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const data = {
                    category: document.getElementById('newCategory').value,
                    situation: document.getElementById('newSituation').value,
                    arabic: document.getElementById('newArabic').value,
                    english: document.getElementById('newEnglish').value
                };
                addScript(data);
                closeModal();
            });

            // Auto-save on page close
            window.addEventListener('beforeunload', saveScripts);
        }

        // Initialize app
        function init() {
            initEvents();
            filterScripts();
            setTimeout(() => {
                showNotification('Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù†Øµ Ù„Ù†Ø³Ø®Ù‡');
            }, 1000);
        }

        // Ù…ØªØºÙŠØ± Ù„ØªØªØ¨Ø¹ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø³Ø­ÙˆØ¨
        let draggedElement = null;

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª
        function handleDragStart(e) {
            draggedElement = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', this.outerHTML);
        }

        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.dataTransfer.dropEffect = 'move';
            return false;
        }

        function handleDragEnter(e) {
            this.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }

        function handleDrop(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            }

            if (draggedElement !== this) {
                const draggedIndex = parseInt(draggedElement.dataset.index);
                const targetIndex = parseInt(this.dataset.index);
                
                // Ù†Ù‚Ù„ Ø§Ù„Ø¹Ù†ØµØ± ÙÙŠ Ø§Ù„Ù…ØµÙÙˆÙØ©
                const draggedItem = filteredScripts[draggedIndex];
                filteredScripts.splice(draggedIndex, 1);
                filteredScripts.splice(targetIndex, 0, draggedItem);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ØµÙÙˆÙØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
                scripts = [...filteredScripts];
                saveScripts();
                renderTable();
                showNotification('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ±ØªÙŠØ¨');
            }

            return false;
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');
            
            // Ø¥Ø²Ø§Ù„Ø© ÙØ¦Ø© drag-over Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±
            const rows = document.querySelectorAll('.draggable-row');
            rows.forEach(row => row.classList.remove('drag-over'));
            
            draggedElement = null;
        }

        // Start app
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>
