<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JustClean Scripts - Ù…Ø¯Ù…Ø¬ Ù…Ø¹ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            font-weight: 500;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #6366f1);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-danger:hover {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
        }
        
        .input-field {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(59, 130, 246, 0.2);
            border-radius: 8px;
            padding: 12px;
            transition: all 0.2s ease;
            width: 100%;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .script-text {
            cursor: pointer;
            padding: 12px;
            border-radius: 8px;
            transition: all 0.2s ease;
            line-height: 1.6;
        }
        
        .script-text:hover {
            background: rgba(59, 130, 246, 0.1);
            transform: scale(1.01);
        }
        
        .table-header {
            background: linear-gradient(135deg, #3b82f6, #6366f1);
            color: white;
        }
        
        .table-row {
            background: rgba(255, 255, 255, 0.8);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .table-row:nth-child(even) {
            background: rgba(248, 250, 252, 0.8);
        }
        
        .table-row:hover {
            background: rgba(59, 130, 246, 0.05);
        }
        
        .status-indicator {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: #10b981;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
        
        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 24px;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .close-btn {
            color: #9ca3af;
            float: left;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }
        
        .close-btn:hover {
            color: #374151;
        }
        
        .category-badge {
            display: inline-block;
            padding: 4px 8px;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 12px;
            font-size: 12px;
            color: #3b82f6;
            margin-left: 8px;
        }
        
        .help-text {
            background: rgba(59, 130, 246, 0.05);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 8px;
            padding: 12px;
            color: #1e40af;
            font-size: 14px;
            margin: 16px 0;
        }
        
        .draggable-row {
            cursor: move;
            transition: all 0.2s ease;
        }
        
        .dragging {
            opacity: 0.6;
            background: linear-gradient(135deg, #f59e0b, #ef4444);
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .drag-over {
            border-top: 3px solid #3b82f6;
        }
        
        .drag-handle {
            cursor: move;
            color: #6b7280;
            font-size: 16px;
            padding: 4px;
            margin-left: 8px;
        }
        
        .drag-handle:hover {
            color: #3b82f6;
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <!-- Status Indicator -->
    <div class="status-indicator" id="statusIndicator">Ù…Ø­ÙÙˆØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</div>
    
    <!-- Notification -->
    <div class="notification" id="notification"></div>
    
    <!-- Add Script Modal -->
    <div id="addModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2 class="text-xl font-bold mb-4 text-gray-800">Ø¥Ø¶Ø§ÙØ© Ø³ÙƒØ±ÙŠØ¨Øª Ø¬Ø¯ÙŠØ¯</h2>
            <form id="addForm">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©</label>
                    <select id="newCategory" class="input-field" required>
                        <option value="greeting">ØªØ±Ø­ÙŠØ¨</option>
                        <option value="delay">ØªØ£Ø®ÙŠØ±</option>
                        <option value="cancel">Ø¥Ù„ØºØ§Ø¡</option>
                        <option value="complaint">Ø´ÙƒÙˆÙ‰</option>
                        <option value="payment">Ø¯ÙØ¹</option>
                        <option value="order">Ø·Ù„Ø¨</option>
                        <option value="other">Ø£Ø®Ø±Ù‰</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">ÙˆØµÙ Ø§Ù„Ù…ÙˆÙ‚Ù</label>
                    <input type="text" id="newSituation" class="input-field" required placeholder="Ù…Ø«Ø§Ù„: ØªØ£Ø®Ø± Ø§Ù„Ø¹Ø§Ù…Ù„">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ</label>
                    <textarea id="newArabic" class="input-field" rows="3" required placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ø¯ Ù‡Ù†Ø§..."></textarea>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ</label>
                    <textarea id="newEnglish" class="input-field" rows="3" required placeholder="Write response here..."></textarea>
                </div>
                <div class="flex gap-3">
                    <button type="submit" class="btn-primary flex-1">Ø¥Ø¶Ø§ÙØ©</button>
                    <button type="button" id="cancelBtn" class="bg-gray-300 text-gray-700 px-6 py-3 rounded-lg">Ø¥Ù„ØºØ§Ø¡</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Header -->
    <div class="text-white py-6 mb-6">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center flex-wrap gap-4">
                <div>
                    <h1 class="text-3xl font-bold mb-2">Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª JustClean</h1>
                    <p class="text-lg opacity-90">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù†Øµ Ù„Ù†Ø³Ø®Ù‡ ÙÙˆØ±Ø§Ù‹</p>
                </div>
                <div class="flex gap-3">
                    <button id="addBtn" class="btn-success">+ Ø¥Ø¶Ø§ÙØ© Ø³ÙƒØ±ÙŠØ¨Øª</button>
                    <button id="exportBtn" class="btn-primary">ØªØµØ¯ÙŠØ±</button>
                    <input type="file" id="importFile" accept=".json" style="display: none;">
                    <button id="importBtn" class="btn-primary">Ø§Ø³ØªÙŠØ±Ø§Ø¯</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 pb-8">
        <!-- Search Section -->
        <div class="card p-6 mb-6">
            <div class="mb-4">
                <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª..." class="input-field text-lg">
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                <select id="categoryFilter" class="input-field">
                    <option value="all">ÙƒÙ„ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹</option>
                    <option value="greeting">ØªØ±Ø­ÙŠØ¨</option>
                    <option value="delay">ØªØ£Ø®ÙŠØ±</option>
                    <option value="cancel">Ø¥Ù„ØºØ§Ø¡</option>
                    <option value="complaint">Ø´ÙƒÙˆÙ‰</option>
                    <option value="payment">Ø¯ÙØ¹</option>
                    <option value="order">Ø·Ù„Ø¨</option>
                    <option value="other">Ø£Ø®Ø±Ù‰</option>
                </select>
                
                <button id="resetBtn" class="bg-gray-500 text-white px-4 py-3 rounded-lg hover:bg-gray-600">Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø«</button>
                
                <div class="flex items-center justify-center bg-green-50 border border-green-200 rounded-lg px-4">
                    <span class="text-green-700 font-medium">Ø§Ù„Ø¹Ø¯Ø¯: <span id="countDisplay">0</span></span>
                </div>
                
                <button id="clearAllBtn" class="btn-danger">Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
            </div>
            
            <div class="help-text">
                ğŸ’¡ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù†Øµ Ù„Ù†Ø³Ø®Ù‡ â€¢ Ø§Ø³Ø­Ø¨ Ù…Ù† â‰¡ Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ±ØªÙŠØ¨ â€¢ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ØªÙØ­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ â€¢ Ø§Ø³ØªØ®Ø¯Ù… "ØªØµØ¯ÙŠØ±" Ù„Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
            </div>
        </div>
        
        <!-- Scripts Table -->
        <div class="card overflow-hidden">
            <table class="min-w-full">
                <thead class="table-header">
                    <tr>
                        <th class="px-4 py-3 text-right font-medium">ØªØ±ØªÙŠØ¨</th>
                        <th class="px-4 py-3 text-right font-medium">Ø§Ù„Ù†ÙˆØ¹</th>
                        <th class="px-4 py-3 text-right font-medium">Ø§Ù„Ù…ÙˆÙ‚Ù</th>
                        <th class="px-4 py-3 text-right font-medium">Ø§Ù„Ø±Ø¯ Ø§Ù„Ø¹Ø±Ø¨ÙŠ</th>
                        <th class="px-4 py-3 text-right font-medium">Ø§Ù„Ø±Ø¯ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ</th>
                        <th class="px-4 py-3 text-right font-medium">Ø­Ø°Ù</th>
                    </tr>
                </thead>
                <tbody id="scriptsTable">
                    <!-- Scripts will be inserted here -->
                </tbody>
            </table>
        </div>
    </main>

    <script>
        // === CONFIGURATION ===
        // Default scripts embedded in the code (from the JSON you provided)
        const defaultScripts = [
  {
    "id": 24,
    "category": "greetings",
    "situation": "ØªØ­ÙŠØ© Ùˆ Ø§Ù†ØªØ¸Ø§Ø± ",
    "arabic": "Ù…Ø±Ø­Ø¨Ø§ Ù…Ø¹Ùƒ Ø§Ø¨ÙˆØ¨ÙƒØ± Ù…Ù† Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø³Øª ÙƒÙ„ÙŠÙ†. Ø§Ø³Ù…Ø­ Ù„ÙŠ Ø¨Ù…Ø±Ø§Ø¬Ø¹Ù‡ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨.. Ø±Ø¬Ø§Ø¡Ø§ Ø§Ø¨Ù‚Ù‰ Ù…Ø¹Ø§Ù†Ø§ Ø¨Ø¶Ø¹ Ø¯Ù‚Ø§Ø¦Ù‚ Ø¹Ù„ÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",
    "english": "Hello, this is abobakr from JustClean customer care. Please bear with me for a few minutes to review your order details."
  },
  {
    "id": 0,
    "category": "greetings",
    "situation": "Ø§Ù„ØªØ­ÙŠØ© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©",
    "arabic": "Ù…Ø±Ø­Ø¨Ø§ Ù…Ø¹Ùƒ Ø§Ø¨ÙˆØ¨ÙƒØ± Ù…Ù† Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø³Øª ÙƒÙ„ÙŠÙ†.. ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ",
    "english": "Hello, this is abobakr from JustClean customer care. How may I assist you?"
  },
  {
    "id": 16,
    "category": "waiting",
    "situation": "Ø§Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",
    "arabic": "Ø§Ø³Ù…Ø­ Ù„ÙŠ Ø¨Ù…Ø±Ø§Ø¬Ø¹Ù‡ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨.. Ø±Ø¬Ø§Ø¡Ø§ Ø§Ø¨Ù‚Ù‰ Ù…Ø¹Ø§Ù†Ø§ Ø¨Ø¶Ø¹ Ø¯Ù‚Ø§Ø¦Ù‚ Ø¹Ù„ÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",
    "english": "Please bear with me for a few minutes to review your order details."
  },
  {
    "id": 22,
    "category": "waiting",
    "situation": "Ø§Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ",
    "arabic": "Ø´ÙƒØ±Ø§ Ù„Ø£Ù†ØªØ¸Ø§Ø±ÙƒØŒ Ù†Ø­Ù† Ù†Ù‚Ø¯Ø± Ø­Ù‚Ø§ ØµØ¨Ø±Ùƒ ÙˆÙ†Ø¹ØªØ°Ø± Ù„Ùƒ Ø¹Ù† Ø§Ù‰ ØªØ£Ø®ÙŠØ± ",
    "english": "Thank you for holding. I really appreciate your patience"
  },
  {
    "id": 23,
    "category": "feedback",
    "situation": "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ",
    "arabic": "Ø³ÙˆÙ Ø£Ø±Ø³Ù„ Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ ÙˆØ³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‡Ø§ØªÙÙŠØ§Ù‹ ÙÙˆØ± ÙˆØµÙˆÙ„ Ø§Ù„Ø±Ø¯.",
    "english": "I will send it to the relevant department and they will contact you by phone as soon as the response arrives."
  },
  {
    "id": 26,
    "category": "order",
    "situation": "Ø·Ù„Ø¨ Ù„Ù„Ù‚Ø³Ù…",
    "arabic": "Ù„Ù‚Ø¯ Ø§Ø±Ø³Ù„Øª Ø·Ù„Ø¨Ùƒ Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ ÙˆØ³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‡Ø§ØªÙÙŠØ§Ù‹ ÙÙˆØ± ÙˆØµÙˆÙ„ Ø§Ù„Ø±Ø¯.",
    "english": "Your request has been sent to the relevant department, and you will be contacted by phone as soon as the response\u00a0arrives."
  },
  {
    "id": 20,
    "category": "closing",
    "situation": "Ø¹Ø¯Ù… Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„",
    "arabic": "Ø¹Ø°Ø±Ø§ Ù„Ù… Ù†ØªÙ„Ù‚ Ù…Ù†Ùƒ Ø£ÙŠ Ø±Ø¯ Ù…Ù†Ø° ÙØªØ±Ø©ØŒ Ø³Ù†Ù‚ÙˆÙ… Ø§Ù„Ø¢Ù† Ø¨Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© ÙˆÙ†Ø±Ø¬Ùˆ Ø¹Ø¯Ù… Ø§Ù„ØªØ±Ø¯Ø¯ ÙÙŠ Ù…Ø­Ø§Ø¯Ø«ØªÙ†Ø§ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø¥Ù† Ø£Ø±Ø¯Øª Ù…Ø³Ø§Ø¹Ø¯ØªÙ†Ø§ØŒ Ø´ÙƒØ±Ø§ Ù„Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø¬Ø³Øª ÙƒÙ„ÙŠÙ†",
    "english": "Sorry, we didn't hear from you in a while. This chat will be closed, but please feel free to contact us again if you need any assistance. Thank you for contacting JustClean."
  },
  {
    "id": 21,
    "category": "closing",
    "situation": "Ø§Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© ",
    "arabic": "Ù‡Ù„ ÙŠÙˆØ¬Ø¯ Ø´ÙŠØ¡ Ø§Ø®Ø± Ø§Ø³ØªØ·ÙŠØ¹ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø¨Ù‡ Ø§Ù„ÙŠÙˆÙ…ØŸ",
    "english": "is there anything else I might help you with today?"
  },
  {
    "id": 19,
    "category": "feedback",
    "situation": "Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©",
    "arabic": "Ø´ÙƒØ±Ø§ Ù„Ø§ØªØµØ§Ù„Ùƒ Ø¹Ù„Ù‰ Ø¬Ø³Øª ÙƒÙ„ÙŠÙ†. Ø¥Ø°Ø§ Ø·Ø±Ø£Øª Ù„Ø¯ÙŠÙƒ Ø§ÙŠ Ø§Ø³Ø¦Ù„Ù‡ Ø§Ø®Ø±Ù‰ ÙÙ„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø§ Ø¹Ø¨Ø± Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© Ø£Ùˆ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø§ÙŠÙ…ÙŠÙ„ customercare@Justclean.com",
    "english": "Thank you for contacting JustClean. For any further questions, please contact us via Live Chat or email customercare@Justclean.com"
  },
  {
    "id": 25,
    "category": "delays",
    "situation": "reschedule out of the policy",
    "arabic": "Ø§Ù„ÙÙƒØ±Ø© Ø§Ù† Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ù‡ Ø§Ù„Ø°ÙŠ Ù‚Ù…Øª Ø¨Ø­Ø¬Ø²Ù‡ ÙŠÙ‚ÙˆÙ… Ø¨ØªØ®ØµÙŠØµ Ù…ÙˆØ¸ÙÙŠÙ† Ù…Ø®ØµÙˆØµØ§ Ù„Ø·Ù„Ø¨Ùƒ Ùˆ ÙŠÙƒÙˆÙ† Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø°ÙŠ Ù‚Ù…Øª Ø¨Ø­Ø¬Ø²Ù‡ ØºÙŠØ± Ù…ØªØ§Ø­ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ù† Ù‚Ø¨Ù„ Ø§ÙŠ Ø¹Ù…ÙŠÙ„ Ø§Ø®Ø± ØŒ Ùˆ Ù„Ø°Ù„Ùƒ\nÙˆ Ø·Ø¨Ù‚Ø§ Ù„Ù„Ø´Ø±ÙˆØ· Ùˆ Ø§Ù„Ø§Ø­ÙƒØ§Ù… Ø§Ù„Ø®Ø§ØµÙ‡ Ø¨Ø§Ù„Ø®Ø¯Ù…Ù‡ ÙØ§Ù† Ø§Ù„ØºØ§Ø¡ Ø§Ùˆ Ø§Ø¹Ø§Ø¯Ù‡ Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…ÙˆØ¹Ø¯ ØºÙŠØ± Ù…ØªØ§Ø­",
    "english": "The service provider you've chosen is assigning his workers to your order, and also the time you've chosen is allocated to you so no other customer can reserve it. Hence, according to the terms and conditions of the service, cancelling or rescheduling is not possible, unfortunately."
  },
  {
    "id": 18,
    "category": "waiting",
    "situation": "Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„",
    "arabic": "Ø£Ø³Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØ£Ø®ÙŠØ±ØŒ Ù…Ø§Ø²Ù„Øª Ø§Ø±Ø§Ø¬Ø¹ Ø¨Ø¹Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨ÙƒØŒ Ø§Ø³Ù…Ø­ Ù„Ù‰ Ø¨Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ÙˆÙ‚Øª",
    "english": "I'm sorry for this delay. I'm still checking your details, please give me another moment."
  },
  {
    "id": 17,
    "category": "waiting",
    "situation": "Ø¥Ø¹Ù„Ø§Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",
    "arabic": "Ø¥Ø°Ø§ ÙƒÙ†Øª Ù„Ø§ ØªÙ…Ø§Ù†Ø¹ ÙÙŠ ÙˆØ¶Ø¹Ùƒ ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ØŒ ÙØ³Ø£ÙƒÙˆÙ† Ù…Ø¹Ùƒ Ø®Ù„Ø§Ù„ Ù„Ø­Ø¸Ø§Øª",
    "english": "If you don't mind me putting you on hold, I'll be with you in a few moments."
  },
  {
    "id": 1,
    "category": "delays",
    "situation": "ØªØ£Ø®ÙŠØ± Ø®Ø¯Ù…Ø© Ø§Ù„Ù‡ÙˆÙ… ÙƒÙ„ÙŠÙ†Ù†Ø¬",
    "arabic": "Ø¨Ù†Ø¹ØªØ°Ø± Ù…Ù†Ùƒ Ø§Ø®Ù‰ Ø§Ù„ÙƒØ±ÙŠÙ… Ù†Ø¸Ø±Ø§Ù‹ Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„Ø¹Ø§Ù…Ù„Ø© ÙˆØ³ÙˆÙ Ø§Ø±Ø³Ù„ Ø§Ù„Ø­ÙŠÙ† Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ù„Ù„ØªØ§ÙƒÙŠØ¯ Ù…Ø¹ Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ù‡ Ù„Ø³Ø±Ø¹Ù‡ ÙˆØµÙˆÙ„ Ø§Ù„Ø¹Ø§Ù…Ù„Ø© Ù„Ùƒ",
    "english": "We apologize for the cleaner's delay and right now I will send to our department to check with the service provider to make the cleaner contact you as soon as possible"
  },
  {
    "id": 2,
    "category": "delays",
    "situation": "ØªØ£Ø®ÙŠØ± Ø®Ø¯Ù…Ø© Ø§Ù„ÙƒØ§Ø± ÙˆØ§Ø´",
    "arabic": "Ø¨Ù†Ø¹ØªØ°Ø± Ù…Ù†Ùƒ Ø§Ø®Ù‰ Ø§Ù„ÙƒØ±ÙŠÙ… ÙˆØ³ÙˆÙ Ø§Ø±Ø³Ù„ Ø§Ù„Ø­ÙŠÙ† Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ù„Ù„ØªØ§ÙƒÙŠØ¯ Ù…Ø¹ Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ù‡ Ù„Ø³Ø±Ø¹Ù‡ ÙˆØµÙˆÙ„ ÙØ±ÙŠÙ‚ Ø§Ù„ØºØ³ÙŠÙ„ Ù„Ùƒ",
    "english": "We apologize for the delay and right now I will send to our department to check with the service provider to make the washing team contact you as soon as possible"
  },
  {
    "id": 3,
    "category": "delays",
    "situation": "ØªØ£Ø®ÙŠØ± Ø§Ù„Ù„Ø§Ù†Ø¯Ø±Ù‰",
    "arabic": "Ø¨Ù†Ø¹ØªØ°Ø± Ù…Ù†Ùƒ Ø§Ø®Ù‰ Ø§Ù„ÙƒØ±ÙŠÙ… Ùˆ Ø§Ù„Ø­ÙŠÙ† Ø³ÙˆÙ Ø§Ø±Ø§Ø³Ù„ Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ù„Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…ØºØ³Ù„Ù‡ Ù„Ø³Ø±Ø¹Ù‡ ÙˆØµÙˆÙ„ Ø§Ù„Ø§ØºØ±Ø§Ø¶ Ù„Ùƒ Ùˆ ØªÙˆØ§ØµÙ„ Ø§Ù„Ø³Ø§Ø¦Ù‚ Ù…Ø¹Ùƒ",
    "english": "We are so sorry for that and right now I will send to our concerned department to check with laundry to make driver contact you as soon as possible to deliver your items"
  },
  {
    "id": 27,
    "category": "greeting",
    "situation": "Ø§Ø®Ø±Ù‰",
    "arabic": "Ø¹Ù…ÙŠÙ„Ù†Ø§ Ø§Ù„Ø¹Ø²ÙŠØ², Ø¨Ø§Ù„ÙØ¹Ù„ ÙŠÙ…ÙƒÙ†ÙƒÙ… ÙƒØªØ§Ø¨Ø© Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ø«Ù†Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„ØªÙ‰ ØªØ±ÙŠØ¯ÙŠÙ†Ù‡Ø§ ÙˆØ§ÙŠØ¶Ø§ Ø§Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø¹Ø§Ù…Ù„Ø© Ù…ÙØ¶Ù„Ø© ÙŠÙ…ÙƒÙ†Ùƒ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù…Ù‡Ø§ Ø­ØªÙ‰ ÙŠØªÙ… Ø¥ØªØ®Ø§Ø° Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…Ø± ÙÙ‰ Ø§Ù„Ø­Ø³Ø¨Ø§Ù†.",
    "english": "Dear customer, you can indeed add a note during the order with the specifications you want, and if you have a preferred worker, you can write her name so that this matter is taken into account."
  },
  {
    "id": 4,
    "category": "cancellations",
    "situation": "Ø¥Ù„ØºØ§Ø¡ Ø·Ù„Ø¨ Ø§Ù„Ù‡ÙˆÙ… ÙƒÙ„ÙŠÙ†Ù†Ø¬",
    "arabic": "Ø£Ø³Ù Ù„Ø³Ù…Ø§Ø¹ Ø°Ù„ÙƒØŒ Ù‡Ù„ Ù…Ù† Ø§Ù„Ù…Ù…ÙƒÙ† Ø§Ù† Ø§Ø¹Ø±Ù Ø³Ø¨Ø¨ Ø§Ù„Ø§Ù„ØºØ§Ø¡ØŸ",
    "english": "May I know the reason please?"
  },
  {
    "id": 5,
    "category": "cancellations",
    "situation": "Ø¥Ù„ØºØ§Ø¡ Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ø± ÙˆØ§Ø´",
    "arabic": "Ø³ÙˆÙ Ù†Ù‚ÙˆÙ… Ø§Ù„Ø£Ù† Ø¨Ø£Ù„ØºØ§Ø¡ Ø·Ù„Ø¨Ùƒ ÙˆÙ†Ø£Ù…Ù„ ÙÙ‰ Ø®Ø¯Ù…ØªÙƒ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ÙÙ‰ Ø£Ù‚Ø±Ø¨ ÙˆÙ‚Øª",
    "english": "We will now cancel your order and we hope to serve you again soon"
  },
  {
    "id": 6,
    "category": "cancellations",
    "situation": "Ø¥Ù„ØºØ§Ø¡ Ø¨Ø³Ø¨Ø¨ Ø¹Ø¯Ù… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨",
    "arabic": "Ø¨Ù†Ø¹ØªØ°Ø± Ù…Ù†Ùƒ Ø§Ø®Ù‰ Ø§Ù„ÙƒØ±ÙŠÙ… Ù†Ø¸Ø±Ø§Ù‹ Ù„Ø§Ù† Ù„Ù… ÙŠØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ø§Ù‰ Ù…Ø²ÙˆØ¯ Ø®Ø¯Ù…Ù‡ ÙØªÙ… Ø§Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ ØªÙ„Ù‚Ø§Ø¦Ù‰ ÙˆØ§Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ù†ÙØ³ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ø°Ù‰ Ø³Ø­Ø¨ Ù…Ù†Ù‡ ØªÙ„Ù‚Ø§Ø¦Ù‰",
    "english": "We apologize because no service provider accepted the order so it was automatically cancelled and the amount was refunded to the same source"
  },
  {
    "id": 7,
    "category": "complaints",
    "situation": "Ø´ÙƒÙˆÙ‰ Ø¹Ù„Ù‰ Ø®Ø¯Ù…Ø©",
    "arabic": "Ù†Ø­Ù† Ù†Ø£Ø³Ù Ø­Ù‚Ø§Ù‹ Ù„Ù„Ø£Ù…Ø±ØŒ Ø³Ø£Ù‚ÙˆÙ… Ø¨Ø¥Ø±Ø³Ø§Ù„ Ø´ÙƒÙˆØ§Ùƒ Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø¨Ø£Ù‚ØµÙ‰ Ø³Ø±Ø¹Ø©",
    "english": "We sincerely apologize for this, I will forward your complaint to the concerned department to handle it as soon as possible"
  },
  {
    "id": 8,
    "category": "complaints",
    "situation": "Ø´ÙƒÙˆÙ‰ Ø¹Ù„Ù‰ Ø³Ø§Ø¦Ù‚",
    "arabic": "Ù†Ø¹ØªØ°Ø± Ø¨Ø´Ø¯Ø© Ø¹Ù† ØªØµØ±Ù Ø§Ù„Ø³Ø§Ø¦Ù‚ ÙˆØ³Ù†ØªØ®Ø° Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù„Ø§Ø²Ù…Ø© Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… ØªÙƒØ±Ø§Ø± Ø°Ù„Ùƒ",
    "english": "We sincerely apologize for the driver's behavior and we will take necessary actions to ensure this doesn't happen again"
  },
  {
    "id": 9,
    "category": "orders",
    "situation": "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨",
    "arabic": "Ø³ÙˆÙ Ø§ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ù„ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨Ùƒ ÙˆÙ†Ø¹ÙˆØ¯ Ø§Ù„ÙŠÙƒ ÙÙŠ Ø£Ù‚Ø±Ø¨ ÙˆÙ‚Øª",
    "english": "I will check with the concerned department to confirm your order and get back to you asap"
  },
  {
    "id": 10,
    "category": "orders",
    "situation": "Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨",
    "arabic": "Ø·Ù„Ø¨Ùƒ Ù‚ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„ÙŠØ§Ù‹ Ù…Ø¹ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ ÙˆØ³ÙŠØªÙ… Ø¥Ø¹Ù„Ø§Ù…Ùƒ Ø¨Ø£ÙŠ Ù…Ø³ØªØ¬Ø¯Ø§Øª",
    "english": "Your order is currently being followed up with the concerned department and we will update you with any developments"
  },
  {
    "id": 11,
    "category": "payments",
    "situation": "Ø¥Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø§Ù„Ø±ÙŠÙÙ†Ø¯",
    "arabic": "Ø§Ø®ÙŠ Ø¨Ø§Ù„ÙØ¹Ù„ ØªÙ… Ø§Ù„Ø±ÙŠÙÙ†Ø¯ Ù…Ù† Ø¬Ø§Ù†Ø¨Ù†Ø§ ÙˆÙ‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù‚Ø¯ ØªØ³ØªØºØ±Ù‚ Ø¨Ø¹Ø¶ Ø§Ù„ÙˆÙ‚Øª Ø­Ø³Ø¨ Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
    "english": "The refund has been processed from our side and it may take some time depending on your bank"
  },
  {
    "id": 12,
    "category": "payments",
    "situation": "Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø¯ÙØ¹",
    "arabic": "Ù†Ø¹ØªØ°Ø± Ø¹Ù† Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØªÙŠ ÙˆØ§Ø¬Ù‡ØªÙƒ ÙÙŠ Ø§Ù„Ø¯ÙØ¹ØŒ Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ù…Ø¹Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ",
    "english": "We apologize for the payment issue you encountered, could you please share details so we can assist?"
  },
  {
    "id": 13,
    "category": "items",
    "situation": "Ø§ØºØ±Ø§Ø¶ Ù†Ø§Ù‚ØµØ©",
    "arabic": "Ø¨Ù†Ø¹ØªØ°Ø± Ø§Ø®Ù‰ Ø§Ù„ÙƒØ±ÙŠÙ… ÙˆØ§Ù„Ø­ÙŠÙ† Ø³ÙˆÙ Ø§Ø±Ø³Ù„ Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ù„Ù„ØªØ§ÙƒÙŠØ¯ Ù…Ø¹ Ø§Ù„Ù…ØºØ³Ù„Ù‡ Ø¹Ù† Ø§Ù„Ø§Ù…Ø± ÙˆØ¨Ù…Ø¬Ø±Ø¯ ØªÙ„Ù‚Ù‰ Ø§Ù„Ø±Ø¯ Ù…Ù†Ù‡Ù… Ù‚Ø³Ù… Ù…ØªØ§Ø¨Ø¹Ù‡ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø³ÙˆÙ ÙŠØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ",
    "english": "We apologize and will check with the laundry regarding missing items, the follow-up department will contact you once we get a response"
  },
  {
    "id": 14,
    "category": "items",
    "situation": "ØªØ³Ø¬ÙŠÙ„ Ø£ØºØ±Ø§Ø¶ Ø®Ø·Ø£",
    "arabic": "Ù†Ø£Ø³Ù Ø£Ø°Ø§ Ø§Ù„Ù…ØµØ¨ØºØ© Ù‚Ø§Ù…Øª Ø¨Ø£Ø¯Ø®Ø§Ù„ Ø¹Ø¯Ø¯ Ù‚Ø·Ø¹ ØºÙŠØ± ØµØ­ÙŠØ­ ÙÙ‰ Ø·Ù„Ø¨ÙƒØŒ Ø³ÙˆÙ Ù†Ø®Ø¨Ø± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ø¨Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨ Ù…Ø±Ø© Ø§Ø®Ø±Ù‰ Ù…Ø¹ Ø§Ù„Ù…ØµØ¨ØºÙ‡ ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ ÙÙ‰ Ø£Ù‚Ø±Ø¨ ÙˆÙ‚Øª",
    "english": "We apologize if the laundry entered wrong item count, we'll ask the concerned department to review and correct the order"
  },
  {
    "id": 15,
    "category": "feedback",
    "situation": "Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚",
    "arabic": "Ù†Ø­Ù† Ø´Ø§ÙƒØ±ÙŠÙ† Ø¬Ø¯Ø§ Ù„ØªØ¹Ù„ÙŠÙ‚Ùƒ ÙˆØ³ÙˆÙ ÙŠØ£Ø®Ø° Ø¨Ø§Ù„Ø£Ø¹ØªØ¨Ø§Ø± Ø£Ø±Ø³Ø§Ù„Ù‡ Ø§Ù„Ù‰ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ø®Ø¯Ù…Ø© Ù„Ø¯ÙŠÙ†Ø§. Ø£Ø³ØªÙ…Ø± Ø¨ØªØ²ÙˆÙŠØ¯Ù†Ø§ Ø¨ØªØ¹Ù„ÙŠÙ‚Ø§ØªÙƒ Ø­ØªÙ‰ Ù†ØªÙ…ÙƒÙ† Ù…Ù† ØªØ­Ø³ÙŠÙ† Ø®Ø¯Ù…Ø§ØªÙ†Ø§ Ù„Ùƒ",
    "english": "We highly appreciate your feedback which will be forwarded to improve our service. Keep providing feedback so we can serve you better"
  },
  {
    "id": 29,
    "category": "other",
    "situation": "rate the service ",
    "arabic": "ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø·Ù„Ø¨ ÙÙ‚Ø· Ø¨Ø¹Ø¯ Ø£Ù† ÙŠØªÙ… ØªÙˆØµÙŠÙ„Ù‡ ÙˆØ¯ÙØ¹Ù‡ØŒ Ù…Ù…Ø§ ÙŠØ¹Ù†ÙŠ Ø£Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ Ù‡ÙŠ 'Ù…ÙƒØªÙ…Ù„' Ø£Ùˆ 'Ù…Ù†ØªÙ‡ÙŠ'. Ø¨Ø¹Ø¯ Ø°Ù„ÙƒØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø·Ù„Ø¨Ùƒ Ø§Ù„Ø£Ø®ÙŠØ± ÙˆØ³ØªØ¬Ø¯ ØªÙ‚ÙŠÙŠÙ… Ù„ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØªØ¹Ù„Ù‚ Ø¨Ø§Ù„Ø®Ø¯Ù…Ø©ØŒ Ù…Ø«Ù„ Ø§Ù„ØªÙˆØµÙŠÙ„ ÙˆØ§Ù„Ø³Ø§Ø¦Ù‚ ÙˆØ¬ÙˆØ¯Ø© Ø§Ù„Ø®Ø¯Ù…Ø©.",
    "english": "You can evaluate the order only after it has been delivered and paid for, meaning the order status is 'complete' or 'finished'. After that, you can access your last order and you will find an evaluation for everything related to the service, such as delivery, the driver, and service quality."
  }
];

        // Helper: set of default IDs (so we can prevent deleting global defaults)
        const defaultIds = new Set(defaultScripts.map(s => s.id));

        // LocalStorage keys
        const USER_KEY = 'justclean_user_scripts_v1';

        // Load user scripts (only user-added ones)
        function loadUserScripts() {
            try {
                const saved = localStorage.getItem(USER_KEY);
                return saved ? JSON.parse(saved) : [];
            } catch (e) {
                return [];
            }
        }

        // Save user scripts (only user-added)
        function saveUserScripts(userScripts) {
            try {
                localStorage.setItem(USER_KEY, JSON.stringify(userScripts));
                updateStatus('ØªÙ… Ø§Ù„Ø­ÙØ¸');
            } catch (e) {
                showNotification('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸', 'error');
            }
        }

        // Initialize combined scripts (defaults + user-specific)
        let userScripts = loadUserScripts();
        let scripts = [...defaultScripts, ...userScripts];
        let filteredScripts = [...scripts];
        let nextId = Math.max(...scripts.map(s => s.id || 0), 0) + 1;

        // Update status
        function updateStatus(text) {
            const status = document.getElementById('statusIndicator');
            status.textContent = text;
            setTimeout(() => {
                status.textContent = 'Ù…Ø­ÙÙˆØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹';
            }, 2000);
        }

        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.background = type === 'error' ? '#ef4444' : '#10b981';
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // Copy text
        function copyText(text) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    showNotification('ØªÙ… Ø§Ù„Ù†Ø³Ø®');
                });
            } else {
                // Fallback
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                showNotification('ØªÙ… Ø§Ù„Ù†Ø³Ø®');
            }
        }

        // Get category display name
        function getCategoryName(category) {
            const names = {
                greeting: 'ØªØ±Ø­ÙŠØ¨',
                greetings: 'ØªØ±Ø­ÙŠØ¨',
                delay: 'ØªØ£Ø®ÙŠØ±',
                delays: 'ØªØ£Ø®ÙŠØ±',
                cancel: 'Ø¥Ù„ØºØ§Ø¡',
                cancellations: 'Ø¥Ù„ØºØ§Ø¡',
                complaint: 'Ø´ÙƒÙˆÙ‰',
                complaints: 'Ø´ÙƒÙˆÙ‰',
                payment: 'Ø¯ÙØ¹',
                payments: 'Ø¯ÙØ¹',
                order: 'Ø·Ù„Ø¨',
                orders: 'Ø·Ù„Ø¨',
                other: 'Ø£Ø®Ø±Ù‰',
                items: 'Ø£ØºØ±Ø§Ø¶',
                feedback: 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª',
                closing: 'Ø¥Ù†Ù‡Ø§Ø¡'
            };
            return names[category] || category;
        }

        // Render table
        function renderTable() {
            const tbody = document.getElementById('scriptsTable');
            tbody.innerHTML = '';
            
            if (filteredScripts.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center py-8 text-gray-500">
                            <div class="text-4xl mb-2">ğŸ“</div>
                            <div>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª</div>
                            <div class="text-sm mt-1">Ø§Ø¶ØºØ· "Ø¥Ø¶Ø§ÙØ© Ø³ÙƒØ±ÙŠØ¨Øª" Ù„Ø¨Ø¯Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª</div>
                        </td>
                    </tr>
                `;
            } else {
                filteredScripts.forEach((script, index) => {
                    const row = document.createElement('tr');
                    row.className = 'table-row draggable-row';
                    row.draggable = true;
                    row.dataset.index = index;
                    
                    // Disable delete button for default scripts
                    const isDefault = defaultIds.has(script.id);
                    
                    row.innerHTML = `
                        <td class="px-4 py-3">
                            <div class="drag-handle">â‰¡</div>
                        </td>
                        <td class="px-4 py-3">
                            <span class="category-badge">${getCategoryName(script.category)}</span>
                        </td>
                        <td class="px-4 py-3 font-medium">${script.situation}</td>
                        <td class="px-4 py-3">
                            <div class="script-text" onclick="copyText('${script.arabic.replace(/'/g, "\\'")}')">
                                ${script.arabic}
                            </div>
                        </td>
                        <td class="px-4 py-3">
                            <div class="script-text" onclick="copyText('${script.english.replace(/'/g, "\\'")}')">
                                ${script.english}
                            </div>
                        </td>
                        <td class="px-4 py-3">
                            <button ${isDefault ? 'disabled title="Ø³ÙƒØ±ÙŠØ¨Øª Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°ÙÙ‡" class="btn-danger opacity-50 cursor-not-allowed text-xs px-2 py-1"' : 'onclick="deleteScript('+script.id+')" class="btn-danger text-xs px-2 py-1"'}>
                                Ø­Ø°Ù
                            </button>
                        </td>
                    `;
                    
                    // Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª
                    row.addEventListener('dragstart', handleDragStart);
                    row.addEventListener('dragover', handleDragOver);
                    row.addEventListener('drop', handleDrop);
                    row.addEventListener('dragend', handleDragEnd);
                    row.addEventListener('dragenter', handleDragEnter);
                    row.addEventListener('dragleave', handleDragLeave);
                    
                    tbody.appendChild(row);
                });
            }
            
            document.getElementById('countDisplay').textContent = filteredScripts.length;
        }

        // Filter scripts
        function filterScripts() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            
            filteredScripts = scripts.filter(script => {
                const matchesSearch = !search || 
                    (script.situation && script.situation.toLowerCase().includes(search)) ||
                    (script.arabic && script.arabic.toLowerCase().includes(search)) ||
                    (script.english && script.english.toLowerCase().includes(search));
                
                const matchesCategory = category === 'all' || script.category === category;
                
                return matchesSearch && matchesCategory;
            });
            
            renderTable();
        }

        // Delete script (only user-added scripts can be deleted)
        function deleteScript(id) {
            if (defaultIds.has(id)) {
                showNotification('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ', 'error');
                return;
            }
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØŸ')) {
                // remove from userScripts
                userScripts = userScripts.filter(s => s.id !== id);
                // rebuild combined
                scripts = [...defaultScripts, ...userScripts];
                saveUserScripts(userScripts);
                filterScripts();
                showNotification('ØªÙ… Ø§Ù„Ø­Ø°Ù');
            }
        }

        // Add script (adds to userScripts only)
        function addScript(data) {
            const newScript = {
                id: nextId++,
                category: data.category,
                situation: data.situation,
                arabic: data.arabic,
                english: data.english
            };
            userScripts.push(newScript);
            scripts = [...defaultScripts, ...userScripts];
            saveUserScripts(userScripts);
            filterScripts();
            showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª');
        }

        // Export data (exports only user scripts by default, but includes metadata)
        function exportData() {
            const data = {
                defaultScriptsExported: defaultScripts.length,
                userScripts: userScripts,
                exportDate: new Date().toISOString()
            };
            const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `justclean-user-scripts-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            showNotification('ØªÙ… Ø§Ù„ØªØµØ¯ÙŠØ±');
        }

        // Import data (replaces user scripts only)
        function importData(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    // accept both {scripts: [...]} and {userScripts: [...]} and legacy full export
                    const incoming = data.scripts || data.userScripts || (Array.isArray(data) ? data : null);
                    if (incoming && Array.isArray(incoming)) {
                        if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ ÙƒÙ„ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª Ø§Ù„ØªÙŠ Ø£Ø¶ÙØªÙ‡Ø§ Ø£Ù†Øª Ù…Ø­Ù„ÙŠÙ‹Ø§ØŸ (Ù„Ù† ØªÙ…Ø³Ø­ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©)')) {
                            // ensure ids don't collide with defaults
                            const maxDefaultId = Math.max(...defaultScripts.map(s => s.id || 0), 0);
                            let maxUserId = Math.max(0, ...incoming.map(s => s.id || 0));
                            if (maxUserId <= maxDefaultId) {
                                // reassign ids to avoid collisions
                                incoming.forEach((s, i) => s.id = maxDefaultId + 1 + i);
                            }
                            userScripts = incoming;
                            scripts = [...defaultScripts, ...userScripts];
                            nextId = Math.max(...scripts.map(s => s.id || 0), 0) + 1;
                            saveUserScripts(userScripts);
                            filterScripts();
                            showNotification('ØªÙ… Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯');
                        }
                    } else {
                        showNotification('Ù…Ù„Ù ØºÙŠØ± ØµØ­ÙŠØ­', 'error');
                    }
                } catch (err) {
                    showNotification('Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù', 'error');
                }
            };
            reader.readAsText(file);
        }

        // Clear all user-added scripts (does not remove defaults)
        function clearAll() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª Ø§Ù„ØªÙŠ Ø£Ø¶ÙØªÙ‡Ø§ Ù…Ø­Ù„ÙŠÙ‹Ø§ØŸ\nØ§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø³ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ.')) {
                userScripts = [];
                scripts = [...defaultScripts];
                saveUserScripts(userScripts);
                filterScripts();
                showNotification('ØªÙ… Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª Ø§Ù„Ù…Ø­Ù„ÙŠÙ‘Ø©');
            }
        }

        // Modal functions
        function openModal() {
            document.getElementById('addModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('addModal').style.display = 'none';
            document.getElementById('addForm').reset();
        }

        // Initialize event listeners
        function initEvents() {
            // Search and filter
            document.getElementById('searchInput').addEventListener('input', filterScripts);
            document.getElementById('categoryFilter').addEventListener('change', filterScripts);
            document.getElementById('resetBtn').addEventListener('click', () => {
                document.getElementById('searchInput').value = '';
                document.getElementById('categoryFilter').value = 'all';
                filterScripts();
            });

            // Buttons
            document.getElementById('addBtn').addEventListener('click', openModal);
            document.getElementById('exportBtn').addEventListener('click', exportData);
            document.getElementById('importBtn').addEventListener('click', () => {
                document.getElementById('importFile').click();
            });
            document.getElementById('importFile').addEventListener('change', (e) => {
                if (e.target.files[0]) importData(e.target.files[0]);
            });
            document.getElementById('clearAllBtn').addEventListener('click', clearAll);

            // Modal
            document.getElementById('cancelBtn').addEventListener('click', closeModal);
            document.querySelector('.close-btn').addEventListener('click', closeModal);
            document.getElementById('addModal').addEventListener('click', (e) => {
                if (e.target.id === 'addModal') closeModal();
            });

            // Form
            document.getElementById('addForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const data = {
                    category: document.getElementById('newCategory').value,
                    situation: document.getElementById('newSituation').value,
                    arabic: document.getElementById('newArabic').value,
                    english: document.getElementById('newEnglish').value
                };
                addScript(data);
                closeModal();
            });

            // Auto-save on page close (saves user scripts only)
            window.addEventListener('beforeunload', () => saveUserScripts(userScripts));
        }

        // Ù…ØªØºÙŠØ± Ù„ØªØªØ¨Ø¹ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø³Ø­ÙˆØ¨
        let draggedElement = null;

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª
        function handleDragStart(e) {
            draggedElement = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', this.outerHTML);
        }

        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.dataTransfer.dropEffect = 'move';
            return false;
        }

        function handleDragEnter(e) {
            this.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }

        function handleDrop(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            }

            if (draggedElement !== this) {
                const draggedIndex = parseInt(draggedElement.dataset.index);
                const targetIndex = parseInt(this.dataset.index);
                
                // Move item in filtered array
                const draggedItem = filteredScripts[draggedIndex];
                // If either draggedItem or target is a default script, we won't change default order globally.
                // We'll only reorder within the current user's combined view by rearranging userScripts accordingly.
                
                // Compute a new ordering for userScripts after the drop.
                // Strategy: build a new combined array by moving the draggedItem to targetIndex in filteredScripts,
                // then extract the userScripts items in that order and save them.
                
                const newFiltered = [...filteredScripts];
                newFiltered.splice(draggedIndex, 1);
                newFiltered.splice(targetIndex, 0, draggedItem);

                // Extract user script items in the new order
                const newUserOrder = newFiltered.filter(item => !defaultIds.has(item.id));

                // Update userScripts and combined scripts
                userScripts = newUserOrder;
                scripts = [...defaultScripts, ...userScripts];

                saveUserScripts(userScripts);
                renderTable();
                showNotification('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ±ØªÙŠØ¨');
            }

            return false;
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');
            
            // Ø¥Ø²Ø§Ù„Ø© ÙØ¦Ø© drag-over Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±
            const rows = document.querySelectorAll('.draggable-row');
            rows.forEach(row => row.classList.remove('drag-over'));
            
            draggedElement = null;
        }

        // Start app
        function init() {
            initEvents();
            filterScripts();
            setTimeout(() => {
                showNotification('Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù†Øµ Ù„Ù†Ø³Ø®Ù‡');
            }, 1000);
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>
