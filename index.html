<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JustClean Customer Service Scripts</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Improved font */
        }
        
        .copied-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 24px;
            border-radius: 10px;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            font-weight: 500;
            opacity: 0; /* Start hidden for animation */
            transform: translateY(-20px); /* Start slightly above for animation */
        }
        
        [dir="rtl"] .search-box {
            direction: rtl;
        }
        [dir="ltr"] .search-box {
            direction: ltr;
        }
        
        .draggable-row {
            cursor: grab; /* Indicate draggable */
            transition: all 0.2s ease-in-out; /* Smooth transitions for drag */
        }
        
        .draggable-row:hover {
            transform: scale(1.01); /* Slight scale on hover */
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); /* Subtle shadow on hover */
        }

        .dragging {
            opacity: 0.6;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            cursor: grabbing; /* Indicate grabbing */
        }
        
        .drag-over {
            border-top: 3px solid #667eea;
        }
        
        .drag-handle {
            cursor: grab;
            color: #667eea;
            font-size: 20px;
            font-weight: bold;
            transition: color 0.3s, transform 0.3s;
        }
        
        .drag-handle:hover {
            color: #764ba2;
            transform: scale(1.2); /* More pronounced scale on handle hover */
        }
        
        .gradient-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .gradient-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            transition: all 0.3s ease;
        }
        
        .gradient-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        .add-button {
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }
        
        .add-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(240, 147, 251, 0.4);
        }
        
        .export-button {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .export-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            opacity: 0; /* Start hidden for animation */
            transition: opacity 0.3s ease-out;
        }
        
        .modal.show {
            opacity: 1;
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.9));
            backdrop-filter: blur(20px);
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            transform: translateY(-50px); /* Start above for animation */
            opacity: 0; /* Start hidden for animation */
            transition: all 0.3s ease-out;
        }

        .modal.show .modal-content {
            transform: translateY(0);
            opacity: 1;
        }
        
        .close {
            color: #aaa;
            float: left;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .close:hover {
            color: #667eea;
        }
        
        .form-input {
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid rgba(102, 126, 234, 0.2);
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            background: rgba(255, 255, 255, 1);
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .table-row-even {
            background: linear-gradient(135deg, rgba(255,255,255,0.8), rgba(248,250,252,0.8));
        }
        
        .table-row-odd {
            background: linear-gradient(135deg, rgba(248,250,252,0.8), rgba(241,245,249,0.8));
        }
        
        .status-badge {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        /* Keyframe Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-10px); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: scale(0.8) translateY(-20px); }
            10% { opacity: 1; transform: scale(1) translateY(0); }
            90% { opacity: 1; transform: scale(1) translateY(0); }
            100% { opacity: 0; transform: scale(0.8) translateY(-20px); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        /* Apply Animations */
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }

        .animate-fade-out {
            animation: fadeOut 0.3s ease-in forwards;
        }

        .animate-slide-in {
            animation: slideIn 0.4s ease-out forwards;
        }

        .animate-fade-in-out {
            animation: fadeInOut 2s ease-in-out forwards;
        }

        .animate-shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
            transform: translate3d(0, 0, 0);
            backface-visibility: hidden;
            perspective: 1000px;
        }

        /* Specific button animations */
        .hover\:rotate-1:hover {
            transform: translateY(-2px) rotate(1deg) !important; /* !important to override tailwind */
        }

        .hover\:-rotate-1:hover {
            transform: translateY(-2px) rotate(-1deg) !important; /* !important to override tailwind */
        }

        .hover\:bounce:hover {
            animation: bounce 0.6s !important; /* !important to override tailwind */
        }
    </style>
</head>
<body>
    <!-- Status Badge -->
    <div class="status-badge">
        ğŸ’¾ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…ÙÙØ¹Ù„
    </div>
    
    <!-- Notification -->
    <div class="copied-notification" id="copyNotification">ØªÙ… Ø§Ù„Ù†Ø³Ø®! âœ¨</div>
    
    <!-- Add Script Modal -->
    <div id="addModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 class="text-2xl font-bold mb-6 text-gray-800">Ø¥Ø¶Ø§ÙØ© Ø³ÙƒØ±Ø¨Øª Ø¬Ø¯ÙŠØ¯ ğŸ“</h2>
            <form id="addScriptForm">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„ÙØ¦Ø©</label>
                    <select id="newCategory" class="form-input w-full p-3 rounded-lg focus:outline-none" required>
                        <option value="greetings">Ø§Ù„ØªØ­ÙŠØ© ÙˆØ§Ù„Ø¥ØªØµØ§Ù„</option>
                        <option value="waiting">Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</option>
                        <option value="delays">Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ±</option>
                        <option value="cancellations">Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø¥Ù„ØºØ§Ø¡</option>
                        <option value="complaints">Ø´ÙƒØ§ÙˆÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</option>
                        <option value="orders">Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</option>
                        <option value="payments">Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø¯ÙØ¹</option>
                        <option value="items">Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø£ØºØ±Ø§Ø¶</option>
                        <option value="feedback">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ø§Ù…Ø©</option>
                        <option value="closing">Ø§Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø­Ø§Ù„Ø© / Ø§Ù„Ù…ÙˆÙ‚Ù</label>
                    <input type="text" id="newSituation" class="form-input w-full p-3 rounded-lg focus:outline-none" required placeholder="Ø£Ø¯Ø®Ù„ ÙˆØµÙ Ø§Ù„Ø­Ø§Ù„Ø©...">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</label>
                    <textarea id="newArabic" class="form-input w-full p-3 rounded-lg focus:outline-none h-24" required placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©..."></textarea>
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</label>
                    <textarea id="newEnglish" class="form-input w-full p-3 rounded-lg focus:outline-none h-24" required placeholder="Enter the English response..."></textarea>
                </div>
                <div class="flex gap-4">
                    <button type="submit" class="gradient-button text-white px-6 py-3 rounded-lg font-medium flex-1">
                        Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³ÙƒØ±Ø¨Øª âœ¨
                    </button>
                    <button type="button" id="cancelAdd" class="bg-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium">
                        Ø¥Ù„ØºØ§Ø¡
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Header -->
    <header class="text-white py-8 mb-8">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-4xl font-bold mb-2">JustClean Customer Service âœ¨</h1>
                    <p class="text-xl opacity-90">Ø£Ø¯Ø§Ø© Ù„Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª ÙˆØ§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©</p>
                </div>
                <div class="flex gap-4">
                    <button id="exportBtn" class="export-button text-white px-6 py-3 rounded-lg font-medium transition hover:scale-105">
                        Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ğŸ’¾
                    </button>
                    <!-- ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø²Ø± Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙˆØ¹Ù†ØµØ± Ù…Ù„Ù Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ -->
                    <button id="addScriptBtn" class="add-button text-white px-6 py-3 rounded-lg font-medium transition hover:scale-105">
                        Ø¥Ø¶Ø§ÙØ© Ø³ÙƒØ±Ø¨Øª Ø¬Ø¯ÙŠØ¯ +
                    </button>
                    <button id="toggleLanguage" class="bg-white text-purple-600 px-6 py-3 rounded-lg font-medium transition hover:bg-gray-100 hover:scale-105">
                        English/Ø¹Ø±Ø¨ÙŠ
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 pb-8">
        <!-- Search and Filters -->
        <div class="mb-8 gradient-card p-8 rounded-2xl">
            <div class="search-box mb-6">
                <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø³ÙƒØ±Ø¨Øª... ğŸ”" class="form-input w-full p-4 rounded-xl focus:outline-none text-lg">
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
                <select id="categoryFilter" class="form-input p-4 rounded-xl focus:outline-none">
                    <option value="all">ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª ğŸ“‹</option>
                    <option value="greetings">Ø§Ù„ØªØ­ÙŠØ© ÙˆØ§Ù„Ø¥ØªØµØ§Ù„ ğŸ‘‹</option>
                    <option value="waiting">Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± â³</option>
                    <option value="delays">Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ± â°</option>
                    <option value="cancellations">Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø¥Ù„ØºØ§Ø¡ âŒ</option>
                    <option value="complaints">Ø´ÙƒØ§ÙˆÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ğŸ˜</option>
                    <option value="orders">Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ğŸ“¦</option>
                    <option value="payments">Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø¯ÙØ¹ ğŸ’³</option>
                    <option value="items">Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø£ØºØ±Ø§Ø¶ ğŸ‘”</option>
                    <option value="feedback">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ø§Ù…Ø© ğŸ’­</option>
                    <option value="closing">Ø§Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© ğŸ‘‹</option>
                </select>
                
                <button id="resetFilters" class="bg-gradient-to-r from-gray-400 to-gray-600 text-white px-6 py-4 rounded-xl font-medium hover:from-gray-500 hover:to-gray-700 transition hover:scale-105">
                    Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ğŸ”„
                </button>
                
                <button id="clearAllBtn" class="bg-gradient-to-r from-red-500 to-red-700 text-white px-6 py-4 rounded-xl font-medium hover:from-red-600 hover:to-red-800 transition hover:scale-105">
                    Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„ ğŸ—‘ï¸
                </button>
                
                <div class="col-span-2 flex items-center justify-center bg-green-50 border-2 border-green-200 rounded-xl px-4">
                    <span class="text-green-700 font-medium">ğŸ“Š Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª: <span id="scriptCount">0</span></span>
                </div>
            </div>
            
            <div class="p-4 bg-gradient-to-r from-blue-50 to-purple-50 border-2 border-blue-200 rounded-xl">
                <p class="text-blue-700 font-medium">ğŸ’¡ Ø¬Ù…ÙŠØ¹ ØªØºÙŠÙŠØ±Ø§ØªÙƒ Ù…Ø­ÙÙˆØ¸Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ â€¢ ÙŠÙ…ÙƒÙ†Ùƒ Ø³Ø­Ø¨ Ø§Ù„ØµÙÙˆÙ Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ±ØªÙŠØ¨Ù‡Ø§ â€¢ Ø§Ø³ØªØ®Ø¯Ù… "Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©" Ù„Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø¥Ø¶Ø§ÙÙŠØ© ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­</p>
            </div>
        </div>
        
        <!-- Scripts Table -->
        <div class="gradient-card rounded-2xl overflow-hidden">
            <div class="overflow-x-auto">
                <table class="min-w-full">
                    <thead class="bg-gradient-to-r from-purple-600 to-blue-600 text-white">
                        <tr>
                            <th class="px-6 py-4 text-right text-sm font-bold uppercase tracking-wider">ØªØ±ØªÙŠØ¨</th>
                            <th class="px-6 py-4 text-right text-sm font-bold uppercase tracking-wider">Ø§Ù„Ø­Ø§Ù„Ø© / Ø§Ù„Ù…ÙˆÙ‚Ù</th>
                            <th class="px-6 py-4 text-right text-sm font-bold uppercase tracking-wider">Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</th>
                            <th class="px-6 py-4 text-right text-sm font-bold uppercase tracking-wider">Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</th>
                            <th class="px-6 py-4 text-right text-sm font-bold uppercase tracking-wider">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody id="scriptsTable">
                        <!-- Data will be inserted here via JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <script>
        // Default scripts data
        const defaultScripts = [
            {
                id: 0,
                category: "greetings",
                situation: "Ø§Ù„ØªØ­ÙŠØ© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©",
                arabic: "Ù…Ø±Ø­Ø¨Ø§ Ù…Ø¹Ùƒ Ø§Ø¨ÙˆØ¨ÙƒØ± Ù…Ù† Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø³Øª ÙƒÙ„ÙŠÙ†.. ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ",
                english: "Hello, this is abobakr from JustClean customer care. How may I assist you?"
            },
            {
                id: 1,
                category: "delays",
                situation: "ØªØ£Ø®ÙŠØ± Ø®Ø¯Ù…Ø© Ø§Ù„Ù‡ÙˆÙ… ÙƒÙ„ÙŠÙ†Ù†Ø¬",
                arabic: "Ø¨Ù†Ø¹ØªØ°Ø± Ù…Ù†Ùƒ Ø§Ø®Ù‰ Ø§Ù„ÙƒØ±ÙŠÙ… Ù†Ø¸Ø±Ø§Ù‹ Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„Ø¹Ø§Ù…Ù„Ø© ÙˆØ³ÙˆÙ Ø§Ø±Ø³Ù„ Ø§Ù„Ø­ÙŠÙ† Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ù„Ù„ØªØ§ÙƒÙŠØ¯ Ù…Ø¹ Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ù‡ Ù„Ø³Ø±Ø¹Ù‡ ÙˆØµÙˆÙ„ Ø§Ù„Ø¹Ø§Ù…Ù„Ø© Ù„Ùƒ",
                english: "We apologize for the cleaner's delay and right now I will send to our department to check with the service provider to make the cleaner contact you as soon as possible"
            },
            {
                id: 2,
                category: "delays",
                situation: "ØªØ£Ø®ÙŠØ± Ø®Ø¯Ù…Ø© Ø§Ù„ÙƒØ§Ø± ÙˆØ§Ø´",
                arabic: "Ø¨Ù†Ø¹ØªØ°Ø± Ù…Ù†Ùƒ Ø§Ø®Ù‰ Ø§Ù„ÙƒØ±ÙŠÙ… ÙˆØ³ÙˆÙ Ø§Ø±Ø³Ù„ Ø§Ù„Ø­ÙŠÙ† Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ù„Ù„ØªØ§ÙƒÙŠØ¯ Ù…Ø¹ Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ù‡ Ù„Ø³Ø±Ø¹Ù‡ ÙˆØµÙˆÙ„ ÙØ±ÙŠÙ‚ Ø§Ù„ØºØ³ÙŠÙ„ Ù„Ùƒ",
                english: "We apologize for the delay and right now I will send to our department to check with the service provider to make the washing team contact you as soon as possible"
            },
            {
                id: 3,
                category: "delays",
                situation: "ØªØ£Ø®ÙŠØ± Ø§Ù„Ù„Ø§Ù†Ø¯Ø±Ù‰",
                arabic: "Ø¨Ù†Ø¹ØªØ°Ø± Ù…Ù†Ùƒ Ø§Ø®Ù‰ Ø§Ù„ÙƒØ±ÙŠÙ… Ùˆ Ø§Ù„Ø­ÙŠÙ† Ø³ÙˆÙ Ø§Ø±Ø§Ø³Ù„ Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ù„Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…ØºØ³Ù„Ù‡ Ù„Ø³Ø±Ø¹Ù‡ ÙˆØµÙˆÙ„ Ø§Ù„Ø§ØºØ±Ø§Ø¶ Ù„Ùƒ Ùˆ ØªÙˆØ§ØµÙ„ Ø§Ù„Ø³Ø§Ø¦Ù‚ Ù…Ø¹Ùƒ",
                english: "We are so sorry for that and right now I will send to our concerned department to check with laundry to make driver contact you as soon as possible to deliver your items"
            },
            {
                id: 4,
                category: "cancellations",
                situation: "Ø¥Ù„ØºØ§Ø¡ Ø·Ù„Ø¨ Ø§Ù„Ù‡ÙˆÙ… ÙƒÙ„ÙŠÙ†Ù†Ø¬",
                arabic: "Ø£Ø³Ù Ù„Ø³Ù…Ø§Ø¹ Ø°Ù„ÙƒØŒ Ù‡Ù„ Ù…Ù† Ø§Ù„Ù…Ù…ÙƒÙ† Ø§Ù† Ø§Ø¹Ø±Ù Ø³Ø¨Ø¨ Ø§Ù„Ø§Ù„ØºØ§Ø¡ØŸ",
                english: "May I know the reason please?"
            },
            {
                id: 5,
                category: "cancellations",
                situation: "Ø¥Ù„ØºØ§Ø¡ Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ø± ÙˆØ§Ø´",
                arabic: "Ø³ÙˆÙ Ù†Ù‚ÙˆÙ… Ø§Ù„Ø£Ù† Ø¨Ø£Ù„ØºØ§Ø¡ Ø·Ù„Ø¨Ùƒ ÙˆÙ†Ø£Ù…Ù„ ÙÙ‰ Ø®Ø¯Ù…ØªÙƒ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ÙÙ‰ Ø£Ù‚Ø±Ø¨ ÙˆÙ‚Øª",
                english: "We will now cancel your order and we hope to serve you again soon"
            },
            {
                id: 6,
                category: "cancellations",
                situation: "Ø¥Ù„ØºØ§Ø¡ Ø¨Ø³Ø¨Ø¨ Ø¹Ø¯Ù… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨",
                arabic: "Ø¨Ù†Ø¹ØªØ°Ø± Ù…Ù†Ùƒ Ø§Ø®Ù‰ Ø§Ù„ÙƒØ±ÙŠÙ… Ù†Ø¸Ø±Ø§Ù‹ Ù„Ø§Ù† Ù„Ù… ÙŠØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ø§Ù‰ Ù…Ø²ÙˆØ¯ Ø®Ø¯Ù…Ù‡ ÙØªÙ… Ø§Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ ØªÙ„Ù‚Ø§Ø¦Ù‰ ÙˆØ§Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ù†ÙØ³ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ø°Ù‰ Ø³Ø­Ø¨ Ù…Ù†Ù‡ ØªÙ„Ù‚Ø§Ø¦Ù‰",
                english: "We apologize because no service provider accepted the order so it was automatically cancelled and the amount was refunded to the same source"
            },
            {
                id: 7,
                category: "complaints",
                situation: "Ø´ÙƒÙˆÙ‰ Ø¹Ù„Ù‰ Ø®Ø¯Ù…Ø©",
                arabic: "Ù†Ø­Ù† Ù†Ø£Ø³Ù Ø­Ù‚Ø§Ù‹ Ù„Ù„Ø£Ù…Ø±ØŒ Ø³Ø£Ù‚ÙˆÙ… Ø¨Ø¥Ø±Ø³Ø§Ù„ Ø´ÙƒÙˆØ§Ùƒ Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø¨Ø£Ù‚ØµÙ‰ Ø³Ø±Ø¹Ø©",
                english: "We sincerely apologize for this, I will forward your complaint to the concerned department to handle it as soon as possible"
            },
            {
                id: 8,
                category: "complaints",
                situation: "Ø´ÙƒÙˆÙ‰ Ø¹Ù„Ù‰ Ø³Ø§Ø¦Ù‚",
                arabic: "Ù†Ø¹ØªØ°Ø± Ø¨Ø´Ø¯Ø© Ø¹Ù† ØªØµØ±Ù Ø§Ù„Ø³Ø§Ø¦Ù‚ ÙˆØ³Ù†ØªØ®Ø° Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù„Ø§Ø²Ù…Ø© Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… ØªÙƒØ±Ø§Ø± Ø°Ù„Ùƒ",
                english: "We sincerely apologize for the driver's behavior and we will take necessary actions to ensure this doesn't happen again"
            },
            {
                id: 9,
                category: "orders",
                situation: "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨",
                arabic: "Ø³ÙˆÙ Ø§ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ù„ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨Ùƒ ÙˆÙ†Ø¹ÙˆØ¯ Ø§Ù„ÙŠÙƒ ÙÙŠ Ø£Ù‚Ø±Ø¨ ÙˆÙ‚Øª",
                english: "I will check with the concerned department to confirm your order and get back to you asap"
            },
            {
                id: 10,
                category: "orders",
                situation: "Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨",
                arabic: "Ø·Ù„Ø¨Ùƒ Ù‚ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„ÙŠØ§Ù‹ Ù…Ø¹ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ ÙˆØ³ÙŠØªÙ… Ø¥Ø¹Ù„Ø§Ù…Ùƒ Ø¨Ø£ÙŠ Ù…Ø³ØªØ¬Ø¯Ø§Øª",
                english: "Your order is currently being followed up with the concerned department and we will update you with any developments"
            },
            {
                id: 11,
                category: "payments",
                situation: "Ø¥Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø§Ù„Ø±ÙŠÙÙ†Ø¯",
                arabic: "Ø§Ø®ÙŠ Ø¨Ø§Ù„ÙØ¹Ù„ ØªÙ… Ø§Ù„Ø±ÙŠÙÙ†Ø¯ Ù…Ù† Ø¬Ø§Ù†Ø¨Ù†Ø§ ÙˆÙ‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù‚Ø¯ ØªØ³ØªØºØ±Ù‚ Ø¨Ø¹Ø¶ Ø§Ù„ÙˆÙ‚Øª Ø­Ø³Ø¨ Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
                english: "The refund has been processed from our side and it may take some time depending on your bank"
            },
            {
                id: 12,
                category: "payments",
                situation: "Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø¯ÙØ¹",
                arabic: "Ù†Ø¹ØªØ°Ø± Ø¹Ù† Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØªÙŠ ÙˆØ§Ø¬Ù‡ØªÙƒ ÙÙŠ Ø§Ù„Ø¯ÙØ¹ØŒ Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ù…Ø¹Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ",
                english: "We apologize for the payment issue you encountered, could you please share details so we can assist?"
            },
            {
                id: 13,
                category: "items",
                situation: "Ø§ØºØ±Ø§Ø¶ Ù†Ø§Ù‚ØµØ©",
                arabic: "Ø¨Ù†Ø¹ØªØ°Ø± Ø§Ø®Ù‰ Ø§Ù„ÙƒØ±ÙŠÙ… ÙˆØ§Ù„Ø­ÙŠÙ† Ø³ÙˆÙ Ø§Ø±Ø³Ù„ Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ù„Ù„ØªØ§ÙƒÙŠØ¯ Ù…Ø¹ Ø§Ù„Ù…ØºØ³Ù„Ù‡ Ø¹Ù† Ø§Ù„Ø§Ù…Ø± ÙˆØ¨Ù…Ø¬Ø±Ø¯ ØªÙ„Ù‚Ù‰ Ø§Ù„Ø±Ø¯ Ù…Ù†Ù‡Ù… Ù‚Ø³Ù… Ù…ØªØ§Ø¨Ø¹Ù‡ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø³ÙˆÙ ÙŠØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ",
                english: "We apologize and will check with the laundry regarding missing items, the follow-up department will contact you once we get a response"
            },
            {
                id: 14,
                category: "items",
                situation: "ØªØ³Ø¬ÙŠÙ„ Ø£ØºØ±Ø§Ø¶ Ø®Ø·Ø£",
                arabic: "Ù†Ø£Ø³Ù Ø£Ø°Ø§ Ø§Ù„Ù…ØµØ¨ØºØ© Ù‚Ø§Ù…Øª Ø¨Ø£Ø¯Ø®Ø§Ù„ Ø¹Ø¯Ø¯ Ù‚Ø·Ø¹ ØºÙŠØ± ØµØ­ÙŠØ­ ÙÙ‰ Ø·Ù„Ø¨ÙƒØŒ Ø³ÙˆÙ Ù†Ø®Ø¨Ø± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ø¨Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨ Ù…Ø±Ø© Ø§Ø®Ø±Ù‰ Ù…Ø¹ Ø§Ù„Ù…ØµØ¨ØºÙ‡ ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ ÙÙ‰ Ø£Ù‚Ø±Ø¨ ÙˆÙ‚Øª",
                english: "We apologize if the laundry entered wrong item count, we'll ask the concerned department to review and correct the order"
            },
            {
                id: 15,
                category: "feedback",
                situation: "Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚",
                arabic: "Ù†Ø­Ù† Ø´Ø§ÙƒØ±ÙŠÙ† Ø¬Ø¯Ø§ Ù„ØªØ¹Ù„ÙŠÙ‚Ùƒ ÙˆØ³ÙˆÙ ÙŠØ£Ø®Ø° Ø¨Ø§Ù„Ø£Ø¹ØªØ¨Ø§Ø± Ø£Ø±Ø³Ø§Ù„Ù‡ Ø§Ù„Ù‰ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØµ Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ø®Ø¯Ù…Ø© Ù„Ø¯ÙŠÙ†Ø§. Ø£Ø³ØªÙ…Ø± Ø¨ØªØ²ÙˆÙŠØ¯Ù†Ø§ Ø¨ØªØ¹Ù„ÙŠÙ‚Ø§ØªÙƒ Ø­ØªÙ‰ Ù†ØªÙ…ÙƒÙ† Ù…Ù† ØªØ­Ø³ÙŠÙ† Ø®Ø¯Ù…Ø§ØªÙ†Ø§ Ù„Ùƒ",
                english: "We highly appreciate your feedback which will be forwarded to improve our service. Keep providing feedback so we can serve you better"
            },
            {
                id: 16,
                category: "waiting",
                situation: "Ø§Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",
                arabic: "Ø§Ø³Ù…Ø­ Ù„ÙŠ Ø¨Ù…Ø±Ø§Ø¬Ø¹Ù‡ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨.. Ø±Ø¬Ø§Ø¡Ø§ Ø§Ø¨Ù‚Ù‰ Ù…Ø¹Ø§Ù†Ø§ Ø¨Ø¶Ø¹ Ø¯Ù‚Ø§Ø¦Ù‚ Ø¹Ù„ÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",
                english: "Please bear with me for a few minutes to review your order details."
            },
            {
                id: 17,
                category: "waiting",
                situation: "Ø¥Ø¹Ù„Ø§Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",
                arabic: "Ø¥Ø°Ø§ ÙƒÙ†Øª Ù„Ø§ ØªÙ…Ø§Ù†Ø¹ ÙÙŠ ÙˆØ¶Ø¹Ùƒ ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ØŒ ÙØ³Ø£ÙƒÙˆÙ† Ù…Ø¹Ùƒ Ø®Ù„Ø§Ù„ Ù„Ø­Ø¸Ø§Øª",
                english: "If you don't mind me putting you on hold, I'll be with you in a few moments."
            },
            {
                id: 18,
                category: "waiting",
                situation: "Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„",
                arabic: "Ø£Ø³Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØ£Ø®ÙŠØ±ØŒ Ù…Ø§Ø²Ù„Øª Ø§Ø±Ø§Ø¬Ø¹ Ø¨Ø¹Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨ÙƒØŒ Ø§Ø³Ù…Ø­ Ù„Ù‰ Ø¨Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ÙˆÙ‚Øª",
                english: "I'm sorry for this delay. I'm still checking your details, please give me another moment."
            },
            {
                id: 19,
                category: "feedback",
                situation: "Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©",
                arabic: "Ø´ÙƒØ±Ø§ Ù„Ø§ØªØµØ§Ù„Ùƒ Ø¹Ù„Ù‰ Ø¬Ø³Øª ÙƒÙ„ÙŠÙ†. Ø¥Ø°Ø§ Ø·Ø±Ø£Øª Ù„Ø¯ÙŠÙƒ Ø§ÙŠ Ø§Ø³Ø¦Ù„Ù‡ Ø§Ø®Ø±Ù‰ ÙÙ„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø§ Ø¹Ø¨Ø± Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© Ø£Ùˆ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø§ÙŠÙ…ÙŠÙ„ customercare@Justclean.com",
                english: "Thank you for contacting JustClean. For any further questions, please contact us via Live Chat or email customercare@Justclean.com"
            },
            {
                id: 19,
                category: "feedback",
                situation: "Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©",
                arabic: "Ø´ÙƒØ±Ø§ Ù„Ø§ØªØµØ§Ù„Ùƒ Ø¹Ù„Ù‰ Ø¬Ø³Øª ÙƒÙ„ÙŠÙ†. Ø¥Ø°Ø§ Ø·Ø±Ø£Øª Ù„Ø¯ÙŠÙƒ Ø§ÙŠ Ø§Ø³Ø¦Ù„Ù‡ Ø§Ø®Ø±Ù‰ ÙÙ„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø§ Ø¹Ø¨Ø± Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© Ø£Ùˆ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø§ÙŠÙ…ÙŠÙ„ customercare@Justclean.com",
                english: "Thank you for contacting JustClean. For any further questions, please contact us via Live Chat or email customercare@Justclean.com"
            },
            {
                id: 21,
                category: "closing",
                situation: "ØªØ­ÙŠØ© Ùˆ Ø§Ù†ØªØ¸Ø§Ø±",
                arabic: "Ù…Ø±Ø­Ø¨Ø§ Ù…Ø¹Ùƒ Ø§Ø¨ÙˆØ¨ÙƒØ± Ù…Ù† Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø³Øª ÙƒÙ„ÙŠÙ†.Ø§Ø³Ù…Ø­ Ù„ÙŠ Ø¨Ù…Ø±Ø§Ø¬Ø¹Ù‡ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨.. Ø±Ø¬Ø§Ø¡Ø§ Ø§Ø¨Ù‚Ù‰ Ù…Ø¹Ø§Ù†Ø§ Ø¨Ø¶Ø¹ Ø¯Ù‚Ø§Ø¦Ù‚ Ø¹Ù„ÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",
                english: "Hello, this is abobakr from JustClean customer care. Please bear with me for a few minutes to review your order details."
            }
        ];

        // Load scripts from localStorage or use defaults
        function loadScripts() {
            const saved = localStorage.getItem('justCleanScripts');
            if (saved) {
                try {
                    return JSON.parse(saved);
                } catch (e) {
                    console.error('Error loading scripts:', e);
                    return [...defaultScripts];
                }
            }
            return [...defaultScripts];
        }

        // Save scripts to localStorage
        function saveScripts() {
            try {
                localStorage.setItem('justCleanScripts', JSON.stringify(scripts));
                // Ù„Ø§ Ø¯Ø§Ø¹ÙŠ Ù„Ù€ justCleanScriptsBackup Ù‡Ù†Ø§ØŒ Ù„Ø£Ù†Ù‡Ø§ ØªØ³ØªØ®Ø¯Ù… ÙÙ‚Ø· Ù„Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø§Ù„ÙŠØ¯ÙˆÙŠ Ø£Ùˆ Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Ù…Ù„
                console.log('Scripts saved successfully');
            } catch (e) {
                console.error('Error saving scripts:', e);
                showNotification('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª! ğŸ˜¢', 'error');
            }
        }

        // DOM Elements
        const scriptsTable = document.getElementById('scriptsTable');
        const searchInput = document.getElementById('searchInput');
        const categoryFilter = document.getElementById('categoryFilter');
        const resetFilters = document.getElementById('resetFilters');
        const toggleLanguage = document.getElementById('toggleLanguage');
        const copyNotification = document.getElementById('copyNotification');
        const addScriptBtn = document.getElementById('addScriptBtn');
        const addModal = document.getElementById('addModal');
        const addScriptForm = document.getElementById('addScriptForm');
        const cancelAdd = document.getElementById('cancelAdd');
        const closeModal = document.querySelector('.close');
        const exportBtn = document.getElementById('exportBtn');
        // ØªÙ… Ø¥Ø²Ø§Ù„Ø© importBtn Ùˆ importFile Ù…Ù† Ù‡Ù†Ø§
        const clearAllBtn = document.getElementById('clearAllBtn');
        const scriptCount = document.getElementById('scriptCount');
        
        // Initialize variables
        let scripts = loadScripts();
        let currentLanguage = 'ar'; // Default language
        let filteredScripts = [...scripts];
        let draggedElement = null;
        // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† nextId Ù‡Ùˆ Ø§Ù„Ø£ÙƒØ¨Ø± Ø¨ÙŠÙ† Ø§Ù„Ù€ IDs Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© + 1
        let nextId = scripts.length > 0 ? Math.max(...scripts.map(s => s.id)) + 1 : 0;

        // Get category emoji
        function getCategoryEmoji(category) {
            const emojis = {
                greetings: "ğŸ‘‹",
                waiting: "â³",
                delays: "â°",
                cancellations: "âŒ",
                complaints: "ğŸ˜",
                orders: "ğŸ“¦",
                payments: "ğŸ’³",
                items: "ğŸ‘”",
                feedback: "ğŸ’­",
                closing: "ğŸ‘‹"
            };
            return emojis[category] || "ğŸ“";
        }

        // Update script count
        function updateScriptCount() {
            scriptCount.textContent = filteredScripts.length;
        }

        // Initialize and render the table with animations
        function renderScripts() {
            scriptsTable.innerHTML = '';
            
            if (filteredScripts.length === 0) {
                scriptsTable.innerHTML = `
                    <tr>
                        <td colspan="5" class="px-6 py-12 text-center text-gray-500 animate-fade-in">
                            <div class="text-4xl mb-4">ğŸ“</div>
                            <div class="text-lg font-medium">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³ÙƒØ±Ø¨ØªØ§Øª</div>
                            <div class="text-sm mt-2">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø¥Ø¶Ø§ÙØ© Ø³ÙƒØ±Ø¨Øª Ø¬Ø¯ÙŠØ¯" Ù„Ø¨Ø¯Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª</div>
                        </td>
                    </tr>
                `;
                updateScriptCount();
                return;
            }
            
            filteredScripts.forEach((script, index) => {
                const row = document.createElement('tr');
                const isEven = index % 2 === 0;
                row.className = `hover:bg-gradient-to-r hover:from-purple-50 hover:to-blue-50 draggable-row transition-all duration-200 ${isEven ? 'table-row-even' : 'table-row-odd'} animate-slide-in`;
                row.style.animationDelay = `${index * 0.05}s`; // Staggered animation
                row.draggable = true;
                row.dataset.index = index;
                row.dataset.id = script.id; // Store script ID for easier manipulation
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="drag-handle">â‰¡</div>
                    </td>
                    <td class="px-6 py-4 font-medium text-gray-800">
                        <div class="flex items-center gap-2">
                            <span class="text-lg">${getCategoryEmoji(script.category)}</span>
                            <span>${script.situation}</span>
                        </div>
                    </td>
                    <td class="px-6 py-4 text-gray-700 leading-relaxed">${script.arabic}</td>
                    <td class="px-6 py-4 text-gray-700 leading-relaxed">${script.english}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex gap-2">
                            <button onclick="copyToClipboard('${script.arabic.replace(/'/g, "\\'")}')" class="gradient-button text-white px-4 py-2 rounded-lg text-sm font-medium transition-all hover:scale-105 hover:rotate-1">
                                Ù†Ø³Ø® Ø¹Ø±Ø¨ÙŠ ğŸ“‹
                            </button>
                            <button onclick="copyToClipboard('${script.english.replace(/'/g, "\\'")}')" class="bg-gradient-to-r from-green-400 to-blue-500 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all hover:scale-105 hover:-rotate-1">
                                Ù†Ø³Ø® Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠ ğŸ“‹
                            </button>
                            <button onclick="deleteScript(${script.id})" class="bg-gradient-to-r from-red-400 to-pink-500 text-white px-3 py-2 rounded-lg text-sm font-medium transition-all hover:scale-105 hover:bounce">
                                ğŸ—‘ï¸
                            </button>
                        </div>
                    </td>
                `;
                
                // Add drag and drop event listeners
                row.addEventListener('dragstart', handleDragStart);
                row.addEventListener('dragover', handleDragOver);
                row.addEventListener('drop', handleDrop);
                row.addEventListener('dragend', handleDragEnd);
                row.addEventListener('dragenter', handleDragEnter);
                row.addEventListener('dragleave', handleDragLeave);
                
                scriptsTable.appendChild(row);
            });
            
            updateScriptCount();
        }

        // Drag and Drop functions
        function handleDragStart(e) {
            draggedElement = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/plain', this.dataset.id); // Pass ID, not outerHTML
        }

        function handleDragOver(e) {
            e.preventDefault(); // Necessary to allow dropping
            if (this.classList.contains('draggable-row') && draggedElement !== this) {
                this.classList.add('drag-over');
            }
            return false;
        }

        function handleDragEnter(e) {
            if (this.classList.contains('draggable-row') && draggedElement !== this) {
                this.classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.stopPropagation();
            this.classList.remove('drag-over');

            if (draggedElement !== this) {
                const draggedId = parseInt(e.dataTransfer.getData('text/plain'));
                const targetId = parseInt(this.dataset.id);

                const draggedIndex = scripts.findIndex(s => s.id === draggedId);
                const targetIndex = scripts.findIndex(s => s.id === targetId);

                if (draggedIndex > -1 && targetIndex > -1) {
                    const [removed] = scripts.splice(draggedIndex, 1);
                    scripts.splice(targetIndex, 0, removed);

                    saveScripts();
                    filterScripts(); // Re-render with new order
                    showNotification(currentLanguage === 'ar' ? 'ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ±ØªÙŠØ¨ Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª! âœ¨' : 'Scripts reordered! âœ¨', 'success');
                }
            }
            return false;
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');
            
            // Remove drag-over class from all elements
            const rows = scriptsTable.querySelectorAll('tr');
            rows.forEach(row => row.classList.remove('drag-over'));
            
            draggedElement = null;
        }

        // Copy to clipboard function
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                copyNotification.textContent = currentLanguage === 'ar' ? 'ØªÙ… Ø§Ù„Ù†Ø³Ø®! âœ¨' : 'Copied! âœ¨';
                copyNotification.style.display = 'block';
                copyNotification.classList.add('animate-fade-in-out'); // Add animation class
                setTimeout(() => {
                    copyNotification.classList.remove('animate-fade-in-out');
                    copyNotification.style.display = 'none';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
                showNotification(currentLanguage === 'ar' ? 'ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®! ğŸ˜¢' : 'Failed to copy! ğŸ˜¢', 'error');
            });
        }

        // Delete script function
        function deleteScript(id) {
            if (confirm(currentLanguage === 'ar' ? 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø³ÙƒØ±Ø¨ØªØŸ' : 'Are you sure you want to delete this script?')) {
                scripts = scripts.filter(script => script.id !== id);
                saveScripts();
                filterScripts(); // Re-render after deletion
                showNotification(currentLanguage === 'ar' ? 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ø³ÙƒØ±Ø¨Øª! ğŸ—‘ï¸' : 'Script deleted! ğŸ—‘ï¸', 'success');
            }
        }

        // Show notification function
        function showNotification(message, type = 'success') {
            copyNotification.textContent = message;
            copyNotification.style.display = 'block';
            copyNotification.classList.remove('animate-fade-in-out', 'animate-shake'); // Remove previous animations
            copyNotification.style.background = type === 'success' 
                ? 'linear-gradient(135deg, #10b981, #059669)' 
                : 'linear-gradient(135deg, #ef4444, #dc2626)';

            if (type === 'error') {
                copyNotification.classList.add('animate-shake'); // Add shake animation for errors
            } else {
                copyNotification.classList.add('animate-fade-in-out'); // Add fade animation for success
            }

            setTimeout(() => {
                copyNotification.style.display = 'none';
                copyNotification.style.background = 'linear-gradient(135deg, #667eea, #764ba2)'; // Reset background
                copyNotification.classList.remove('animate-fade-in-out', 'animate-shake');
            }, 3000);
        }

        // Filter scripts
        function filterScripts() {
            const searchTerm = searchInput.value.toLowerCase();
            const category = categoryFilter.value;
            
            filteredScripts = scripts.filter(script => {
                const matchesSearch = 
                    script.situation.toLowerCase().includes(searchTerm) ||
                    script.arabic.toLowerCase().includes(searchTerm) ||
                    script.english.toLowerCase().includes(searchTerm);
                
                const matchesCategory = 
                    category === 'all' || script.category === category;
                
                return matchesSearch && matchesCategory;
            });
            
            renderScripts();
        }

        // Export data (now saves to localStorage)
        function exportData() {
            try {
                // Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙŠØ¯ÙˆÙŠØ© ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­
                localStorage.setItem('justCleanManualBackup', JSON.stringify(scripts));
                showNotification(currentLanguage === 'ar' ? 'ØªÙ… Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­! ğŸ’¾' : 'Backup saved to browser! ğŸ’¾', 'success');
            } catch (e) {
                console.error('Error saving manual backup:', e);
                showNotification(currentLanguage === 'ar' ? 'ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©! ğŸ˜¢' : 'Failed to save backup! ğŸ˜¢', 'error');
            }
        }

        // ØªÙ… Ø¥Ø²Ø§Ù„Ø© ÙˆØ¸ÙŠÙØ© importData() Ø¨Ø§Ù„ÙƒØ§Ù…Ù„

        // Clear all data
        function clearAllData() {
            if (confirm(currentLanguage === 'ar' ? 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§ØªØŸ (Ø³ÙŠØªÙ… Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ø­Ø°Ù)' : 'Are you sure you want to delete all scripts? (An automatic backup will be saved before deletion)')) {
                if (confirm(currentLanguage === 'ar' ? 'ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø³ÙŠÙ…Ø­Ùˆ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª! Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ' : 'WARNING: This will erase all data! Are you sure?')) {
                    // Create backup before clearing
                    localStorage.setItem('justCleanScriptsBackup', JSON.stringify(scripts));
                    
                    scripts = [];
                    saveScripts();
                    filterScripts();
                    showNotification(currentLanguage === 'ar' ? 'ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª! ğŸ—‘ï¸' : 'All data cleared! ğŸ—‘ï¸', 'success');
                }
            }
        }

        // Toggle language and UI direction
        function toggleDir() {
            currentLanguage = currentLanguage === 'ar' ? 'en' : 'ar';
            document.documentElement.lang = currentLanguage;
            document.documentElement.dir = currentLanguage === 'ar' ? 'rtl' : 'ltr';
            
            // Update UI elements
            if (currentLanguage === 'ar') {
                searchInput.placeholder = 'Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø³ÙƒØ±Ø¨Øª... ğŸ”';
                document.querySelector('h1').textContent = 'JustClean Customer Service âœ¨';
                document.querySelector('header p').textContent = 'Ø£Ø¯Ø§Ø© Ù„Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª ÙˆØ§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©';
                toggleLanguage.textContent = 'English/Ø¹Ø±Ø¨ÙŠ';
                addScriptBtn.textContent = 'Ø¥Ø¶Ø§ÙØ© Ø³ÙƒØ±Ø¨Øª Ø¬Ø¯ÙŠØ¯ +';
                exportBtn.textContent = 'Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ğŸ’¾'; // ØªÙ… ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø§Ù„Ø²Ø±
                document.querySelector('.status-badge').innerHTML = 'ğŸ’¾ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…ÙÙØ¹Ù„';
                document.querySelector('.modal-content h2').textContent = 'Ø¥Ø¶Ø§ÙØ© Ø³ÙƒØ±Ø¨Øª Ø¬Ø¯ÙŠØ¯ ğŸ“';
                document.querySelector('#addScriptForm button[type="submit"]').textContent = 'Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³ÙƒØ±Ø¨Øª âœ¨';
                document.querySelector('#cancelAdd').textContent = 'Ø¥Ù„ØºØ§Ø¡';
                document.querySelector('#newCategory').previousElementSibling.textContent = 'Ø§Ù„ÙØ¦Ø©';
                document.querySelector('#newSituation').previousElementSibling.textContent = 'Ø§Ù„Ø­Ø§Ù„Ø© / Ø§Ù„Ù…ÙˆÙ‚Ù';
                document.querySelector('#newArabic').previousElementSibling.textContent = 'Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©';
                document.querySelector('#newEnglish').previousElementSibling.textContent = 'Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©';
                document.querySelector('#newSituation').placeholder = 'Ø£Ø¯Ø®Ù„ ÙˆØµÙ Ø§Ù„Ø­Ø§Ù„Ø©...';
                document.querySelector('#newArabic').placeholder = 'Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©...';
                document.querySelector('#newEnglish').placeholder = 'Enter the English response...';
                document.querySelector('.p-4.bg-gradient-to-r p').innerHTML = 'ğŸ’¡ Ø¬Ù…ÙŠØ¹ ØªØºÙŠÙŠØ±Ø§ØªÙƒ Ù…Ø­ÙÙˆØ¸Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ â€¢ ÙŠÙ…ÙƒÙ†Ùƒ Ø³Ø­Ø¨ Ø§Ù„ØµÙÙˆÙ Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ±ØªÙŠØ¨Ù‡Ø§ â€¢ Ø§Ø³ØªØ®Ø¯Ù… "Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©" Ù„Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø¥Ø¶Ø§ÙÙŠØ© ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­'; // ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Øµ

                // Update category options
                document.querySelector('#categoryFilter option[value="all"]').textContent = 'ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª ğŸ“‹';
                document.querySelector('#categoryFilter option[value="greetings"]').textContent = 'Ø§Ù„ØªØ­ÙŠØ© ÙˆØ§Ù„Ø¥ØªØµØ§Ù„ ğŸ‘‹';
                document.querySelector('#categoryFilter option[value="waiting"]').textContent = 'Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± â³';
                document.querySelector('#categoryFilter option[value="delays"]').textContent = 'Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ± â°';
                document.querySelector('#categoryFilter option[value="cancellations"]').textContent = 'Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø¥Ù„ØºØ§Ø¡ âŒ';
                document.querySelector('#categoryFilter option[value="complaints"]').textContent = 'Ø´ÙƒØ§ÙˆÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ğŸ˜';
                document.querySelector('#categoryFilter option[value="orders"]').textContent = 'Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ğŸ“¦';
                document.querySelector('#categoryFilter option[value="payments"]').textContent = 'Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø¯ÙØ¹ ğŸ’³';
                document.querySelector('#categoryFilter option[value="items"]').textContent = 'Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø£ØºØ±Ø§Ø¶ ğŸ‘”';
                document.querySelector('#categoryFilter option[value="feedback"]').textContent = 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ø§Ù…Ø© ğŸ’­';
                document.querySelector('#categoryFilter option[value="closing"]').textContent = 'Ø§Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© ğŸ‘‹';

                document.querySelector('#newCategory option[value="greetings"]').textContent = 'Ø§Ù„ØªØ­ÙŠØ© ÙˆØ§Ù„Ø¥ØªØµØ§Ù„';
                document.querySelector('#newCategory option[value="waiting"]').textContent = 'Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±';
                document.querySelector('#newCategory option[value="delays"]').textContent = 'Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ±';
                document.querySelector('#newCategory option[value="cancellations"]').textContent = 'Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø¥Ù„ØºØ§Ø¡';
                document.querySelector('#newCategory option[value="complaints"]').textContent = 'Ø´ÙƒØ§ÙˆÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡';
                document.querySelector('#newCategory option[value="orders"]').textContent = 'Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª';
                document.querySelector('#newCategory option[value="payments"]').textContent = 'Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø¯ÙØ¹';
                document.querySelector('#newCategory option[value="items"]').textContent = 'Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø£ØºØ±Ø§Ø¶';
                document.querySelector('#newCategory option[value="feedback"]').textContent = 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ø§Ù…Ø©';
                document.querySelector('#newCategory option[value="closing"]').textContent = 'Ø§Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©';


            } else {
                searchInput.placeholder = 'Search for script... ğŸ”';
                document.querySelector('h1').textContent = 'JustClean Customer Service âœ¨';
                document.querySelector('header p').textContent = 'Quick access tool for ready-made scripts and responses';
                toggleLanguage.textContent = 'English/Ø¹Ø±Ø¨ÙŠ';
                addScriptBtn.textContent = 'Add New Script +';
                exportBtn.textContent = 'Save Backup ğŸ’¾'; // ØªÙ… ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø§Ù„Ø²Ø±
                document.querySelector('.status-badge').innerHTML = 'ğŸ’¾ Auto-save enabled';
                document.querySelector('.modal-content h2').textContent = 'Add New Script ğŸ“';
                document.querySelector('#addScriptForm button[type="submit"]').textContent = 'Add Script âœ¨';
                document.querySelector('#cancelAdd').textContent = 'Cancel';
                document.querySelector('#newCategory').previousElementSibling.textContent = 'Category';
                document.querySelector('#newSituation').previousElementSibling.textContent = 'Situation';
                document.querySelector('#newArabic').previousElementSibling.textContent = 'Arabic Response';
                document.querySelector('#newEnglish').previousElementSibling.textContent = 'English Response';
                document.querySelector('#newSituation').placeholder = 'Enter situation description...';
                document.querySelector('#newArabic').placeholder = 'Enter Arabic response...';
                document.querySelector('#newEnglish').placeholder = 'Enter English response...';
                document.querySelector('.p-4.bg-gradient-to-r p').innerHTML = 'ğŸ’¡ All your changes are automatically saved on your device â€¢ You can drag rows to reorder them â€¢ Use "Save Backup" to save an additional copy in the browser'; // ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Øµ

                // Update category options
                document.querySelector('#categoryFilter option[value="all"]').textContent = 'All Categories ğŸ“‹';
                document.querySelector('#categoryFilter option[value="greetings"]').textContent = 'Greetings & Contact ğŸ‘‹';
                document.querySelector('#categoryFilter option[value="waiting"]').textContent = 'Waiting Cases â³';
                document.querySelector('#categoryFilter option[value="delays"]').textContent = 'Delay Cases â°';
                document.querySelector('#categoryFilter option[value="cancellations"]').textContent = 'Cancellation Cases âŒ';
                document.querySelector('#categoryFilter option[value="complaints"]').textContent = 'Customer Complaints ğŸ˜';
                document.querySelector('#categoryFilter option[value="orders"]').textContent = 'Order Follow-up ğŸ“¦';
                document.querySelector('#categoryFilter option[value="payments"]').textContent = 'Payment Issues ğŸ’³';
                document.querySelector('#categoryFilter option[value="items"]').textContent = 'Items Issues ğŸ‘”';
                document.querySelector('#categoryFilter option[value="feedback"]').textContent = 'General Feedback ğŸ’­';
                document.querySelector('#categoryFilter option[value="closing"]').textContent = 'Closing Conversation ğŸ‘‹';

                document.querySelector('#newCategory option[value="greetings"]').textContent = 'Greetings & Contact';
                document.querySelector('#newCategory option[value="waiting"]').textContent = 'Waiting Cases';
                document.querySelector('#newCategory option[value="delays"]').textContent = 'Delay Cases';
                document.querySelector('#newCategory option[value="cancellations"]').textContent = 'Cancellation Cases';
                document.querySelector('#newCategory option[value="complaints"]').textContent = 'Customer Complaints';
                document.querySelector('#newCategory option[value="orders"]').textContent = 'Order Follow-up';
                document.querySelector('#newCategory option[value="payments"]').textContent = 'Payment Issues';
                document.querySelector('#newCategory option[value="items"]').textContent = 'Items Issues';
                document.querySelector('#newCategory option[value="feedback"]').textContent = 'General Feedback';
                document.querySelector('#newCategory option[value="closing"]').textContent = 'Closing Conversation';
            }

            // Update table headers
            const tableHeaders = document.querySelector('thead tr');
            if (currentLanguage === 'ar') {
                tableHeaders.innerHTML = `
                    <th class="px-6 py-4 text-right text-sm font-bold uppercase tracking-wider">ØªØ±ØªÙŠØ¨</th>
                    <th class="px-6 py-4 text-right text-sm font-bold uppercase tracking-wider">Ø§Ù„Ø­Ø§Ù„Ø© / Ø§Ù„Ù…ÙˆÙ‚Ù</th>
                    <th class="px-6 py-4 text-right text-sm font-bold uppercase tracking-wider">Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</th>
                    <th class="px-6 py-4 text-right text-sm font-bold uppercase tracking-wider">Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</th>
                    <th class="px-6 py-4 text-right text-sm font-bold uppercase tracking-wider">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                `;
            } else {
                tableHeaders.innerHTML = `
                    <th class="px-6 py-4 text-left text-sm font-bold uppercase tracking-wider">Order</th>
                    <th class="px-6 py-4 text-left text-sm font-bold uppercase tracking-wider">Situation</th>
                    <th class="px-6 py-4 text-left text-sm font-bold uppercase tracking-wider">Arabic Response</th>
                    <th class="px-6 py-4 text-left text-sm font-bold uppercase tracking-wider">English Response</th>
                    <th class="px-6 py-4 text-left text-sm font-bold uppercase tracking-wider">Actions</th>
                `;
            }
            
            renderScripts(); // Re-render scripts to apply language changes to buttons
        }

        // Modal functions
        function openModal() {
            addModal.style.display = 'block';
            setTimeout(() => { // Add class after display block to trigger transition
                addModal.classList.add('show');
            }, 10);
            document.body.style.overflow = 'hidden'; // Prevent scrolling
        }

        function closeModalFunc() {
            addModal.classList.remove('show');
            setTimeout(() => { // Hide after transition
                addModal.style.display = 'none';
                document.body.style.overflow = 'auto'; // Restore scrolling
                addScriptForm.reset();
            }, 300); // Match transition duration
        }

        // Event listeners
        searchInput.addEventListener('input', filterScripts);
        categoryFilter.addEventListener('change', filterScripts);
        resetFilters.addEventListener('click', () => {
            searchInput.value = '';
            categoryFilter.value = 'all';
            filterScripts();
            showNotification(currentLanguage === 'ar' ? 'ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙÙ„Ø§ØªØ±! ğŸ”„' : 'Filters reset! ğŸ”„', 'success');
        });
        
        toggleLanguage.addEventListener('click', toggleDir);
        addScriptBtn.addEventListener('click', openModal);
        cancelAdd.addEventListener('click', closeModalFunc);
        closeModal.addEventListener('click', closeModalFunc);
        exportBtn.addEventListener('click', exportData);
        // ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯
        clearAllBtn.addEventListener('click', clearAllData);

        // Close modal when clicking outside
        window.addEventListener('click', (event) => {
            if (event.target === addModal) {
                closeModalFunc();
            }
        });

        // Handle form submission
        addScriptForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const newScript = {
                id: nextId++,
                category: document.getElementById('newCategory').value,
                situation: document.getElementById('newSituation').value,
                arabic: document.getElementById('newArabic').value,
                english: document.getElementById('newEnglish').value
            };
            
            scripts.push(newScript);
            saveScripts();
            filterScripts();
            closeModalFunc();
            showNotification(currentLanguage === 'ar' ? 'ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰' : 'Script added successfully! ğŸ‰', 'success');
        });

        // Auto-save on page unload
        window.addEventListener('beforeunload', () => {
            saveScripts();
        });

        // Initial render
        filterScripts();
        
        // Show initial notification
        setTimeout(() => {
            showNotification(currentLanguage === 'ar' ? 'Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø¬Ù…ÙŠØ¹ ØªØºÙŠÙŠØ±Ø§ØªÙƒ Ù…Ø­ÙÙˆØ¸Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ğŸ’¾' : 'Welcome! All your changes are auto-saved ğŸ’¾', 'success');
        }, 1000);
    </script>
</body>
</html>
